import{a as G}from"./C1xH3N-8.js";import{u as w,s as U,a as F,_ as R}from"./C2_fvD-4.js";import{r as y,o as r,c as _,a as t,t as e,h as o,b as i,d as q,j as g,f as v,g as z,w as S,F as j,i as V,q as T,v as H,m as X,u as Z,n as J,x as K}from"./f8AjloxH.js";import{_ as B}from"./BUypnZGp.js";import{_ as Q}from"./DMOGid_L.js";import{u as I}from"./BMyf1R2r.js";import"./DlAUqK2U.js";const Y={id:"modalOffline",class:"modal fade"},tt={class:"modal-dialog"},st={class:"modal-content"},ot={class:"modal-header"},et={class:"fs-6 text-white"},nt={class:"modal-body"},it={class:"row g-2"},ct={class:"col-12 text-center"},at={class:"fs-6 text-white"},lt={class:"col-12 text-center"},dt={class:"text-normal"},rt={class:"text-white"},_t={class:"col-12 mt-3"},mt={class:"row justify-content-center"},pt={class:"col-5 col-lg-3"},ut={class:"ms-2"},ft={__name:"ModalOffline",setup(h){const l=w();return(d,s)=>{const c=y("font-awesome-icon");return r(),_("div",Y,[t("div",tt,[t("div",st,[t("div",ot,[t("span",et,e(d.$t("modalOffline_title")),1),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:s[0]||(s[0]=u=>o(l).currentModalId=null)},[i(c,{icon:"fas fa-fw fa-times"})])]),t("div",nt,[t("div",it,[t("div",ct,[t("span",at,e(d.$t("modalOffline_text")),1)]),t("div",lt,[t("span",dt,e(d.$t("modalOffline_info")),1),q(),t("span",rt,e(o(G)(o(l).offlineTime)),1)]),t("div",_t,[t("div",mt,[t("div",pt,[t("button",{type:"button",class:"w-100 btn btn-secondary","data-bs-dismiss":"modal",onClick:s[1]||(s[1]=u=>o(l).currentModalId=null)},[t("span",null,[i(c,{icon:"fas fa-fw fa-arrow-right-long"})]),t("span",ut,e(d.$t("modalOffline_close")),1)])])])])])])])])])}}},ht={id:"modalWelcome",class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false"},vt={class:"modal-dialog"},gt={class:"modal-content"},bt={class:"modal-body"},$t={class:"row g-2"},wt={key:0,class:"col-12 text-center"},yt={class:"fs-5 text-white"},xt={class:"col-12"},kt={class:"rounded p-2 text-bg-danger text-center"},Ct={class:"col-12 text-center"},St={key:0},jt={class:"col-12 mt-3"},Ot={class:"row justify-content-center"},Mt={class:"col-5 col-lg-3"},At={class:"ms-2"},It={__name:"ModalWelcome",setup(h){const l=w(),d=function(){l.currentModalId=null,l.firstTime=!1};return(s,c)=>{const u=y("font-awesome-icon");return r(),_("div",ht,[t("div",vt,[t("div",gt,[t("div",bt,[t("div",$t,[o(l).currentScenario?(r(),_("div",wt,[t("div",yt,e(s.$t(o(l).currentScenario.title)),1),t("div",null,e(s.$t(o(l).currentScenario.subtitle)),1)])):g("",!0),t("div",xt,[t("div",kt," v"+e(o(l).version)+" - "+e(s.$t("disclaimer_text")),1)]),t("div",Ct,[o(l).currentScenario?(r(),_("div",St,e(s.$t(o(l).currentScenario.desc)),1)):g("",!0)]),t("div",jt,[t("div",Ot,[t("div",Mt,[t("button",{type:"button",class:"w-100 btn btn-success","data-bs-dismiss":"modal",onClick:c[0]||(c[0]=m=>d())},[t("span",null,[i(u,{icon:"fas fa-fw fa-arrow-right-long"})]),t("span",At,e(s.$t("modalWelcome_close")),1)])])])])])])])])])}}},Et=["src"],Lt={class:"position-absolute lh-1 badge bg-dark",style:{top:"-.25rem",right:"-.5rem"}},Vt={key:0,class:"position-absolute top-0 start-0 lh-1 small text-success"},Tt={__name:"SidebarButton",props:["id"],setup(h){const l=h,d=w(),s=I(),c=v(()=>s.elems.find(u=>u.id==l.id));return(u,m)=>{const b=Q,x=y("font-awesome-icon"),M=B;return r(),z(M,{to:u.localePath("/item/"+h.id),class:"w-100 btn btn-primary position-relative",exactActiveClass:"active",onClick:m[0]||(m[0]=E=>{o(d).sidebarOpen=!1,o(c).notified=!1}),title:u.$t(o(c).name)},{default:S(()=>[t("img",{src:o(c).img,width:"18",height:"18"},null,8,Et),t("div",Lt,[i(b,{id:h.id},null,8,["id"])]),o(c).notified?(r(),_("div",Vt,[i(x,{icon:"fas fa-certificate"})])):g("",!0)]),_:1},8,["to","title"])}}},Bt={class:"text-subtitle text-center"},Nt={class:"row g-1 justify-content-center"},Wt={__name:"SidebarGroup",props:["group"],setup(h){const l=h,d=I(),s=v(()=>d.elems.filter(c=>c.unlocked&&c.type=="item"&&c.group==l.group).map(c=>c.id));return(c,u)=>{const m=Tt;return r(),_(j,null,[t("div",Bt,e(c.$t(h.group)),1),t("div",Nt,[(r(!0),_(j,null,V(o(s),b=>(r(),_("div",{key:b,class:"col-2"},[i(m,{id:b},null,8,["id"])]))),128))])],64)}}},Pt=T("/victory.png"),Dt={id:"modalVictory",class:"modal fade"},Gt={class:"modal-dialog"},Ut={class:"modal-content"},Ft={class:"modal-header bg-secondary"},Rt={class:"fs-6 text-white"},qt={class:"modal-body"},zt={class:"row g-2"},Ht={class:"col-12 text-center"},Xt={class:"fs-5 text-white"},Zt={class:"col-12 text-center"},Jt={class:"text-normal"},Kt=t("div",{class:"col-12 text-center"},[t("img",{src:Pt,width:"48",height:"48"})],-1),Qt={class:"col-12 mt-3"},Yt={class:"row justify-content-center"},ts={class:"col-5 col-lg-3"},ss={class:"ms-2"},os={__name:"ModalVictory",setup(h){const l=w();return(d,s)=>{const c=y("font-awesome-icon");return r(),_("div",Dt,[t("div",Gt,[t("div",Ut,[t("div",Ft,[t("span",Rt,e(d.$t("modalVictory_title")),1),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:s[0]||(s[0]=u=>o(l).currentModalId=null)},[i(c,{icon:"fas fa-fw fa-times"})])]),t("div",qt,[t("div",zt,[t("div",Ht,[t("span",Xt,e(d.$t("modalVictory_subTitle")),1)]),t("div",Zt,[t("span",Jt,e(d.$t("modalVictory_text")),1)]),Kt,t("div",Qt,[t("div",Yt,[t("div",ts,[t("button",{type:"button",class:"w-100 btn btn-success","data-bs-dismiss":"modal",onClick:s[1]||(s[1]=u=>o(l).currentModalId=null)},[t("span",null,[i(c,{icon:"fas fa-fw fa-trophy"})]),t("span",ss,e(d.$t("modalVictory_close")),1)])])])])])])])])])}}},O=T("/favicon.png"),es={key:0,class:"w-100 h-100 d-flex"},ns={class:"h-100 px-3 py-2 scroll-content"},is={class:"row g-3"},cs={class:"col-12"},as={class:"row g-2 align-items-center justify-content-lg-center"},ls=t("div",{class:"col-auto"},[t("img",{src:O,width:"24",height:"24",class:"rounded"})],-1),ds={class:"col col-lg-auto"},rs={class:"fs-5 text-white"},_s={class:"col-auto d-lg-none"},ms={class:"col-12"},ps={class:"row g-1 justify-content-center"},us={class:"col-6"},fs={class:"ms-0"},hs={class:"ms-2"},vs={key:0,class:"position-absolute top-0 end-0 lh-1 small text-success"},gs={key:0,class:"col-6"},bs={class:"ms-0"},$s={class:"ms-2"},ws={key:0,class:"position-absolute top-0 start-0 lh-1 small text-success"},ys={id:"topbar",class:"bg-dark border-bottom border-2 border-translucent"},xs={class:"px-3 py-2"},ks={class:"row g-2 align-items-center flex-nowrap"},Cs={class:"col-auto d-lg-none"},Ss={class:"col text-truncate"},js={class:"row g-2 align-items-center flex-nowrap"},Os={key:0,class:"col-auto"},Ms=["src"],As={class:"col text-truncate"},Is={class:"fs-5 text-white"},Es={class:"col-auto"},Ls={class:"dropdown"},Vs={type:"button",class:"btn btn-danger","data-bs-toggle":"dropdown","aria-expanded":"false"},Ts={class:"d-none d-lg-inline ms-1"},Bs={class:"dropdown-menu dropdown-menu-end p-2 text-bg-danger text-center"},Ns={class:"col-auto"},Ws={class:"ms-0"},Ps={class:"d-none d-lg-inline ms-2"},Ds={id:"page",class:"w-100 scroll-content"},Gs={key:1,class:"w-100 h-100 d-flex align-items-center justify-content-center"},Us={class:"container p-3",style:{"max-width":"512px"}},Fs={class:"card"},Rs={class:"card-header"},qs={class:"row gx-2 align-items-center justify-content-center"},zs=t("div",{class:"col-auto"},[t("img",{src:O,width:"24",height:"24",class:"rounded"})],-1),Hs={class:"col-auto"},Xs={class:"fs-5 text-white"},Zs={class:"card-body"},Js={class:"row g-2 justify-content-center"},Ks={class:"col-12 text-danger text-center fs-6"},Qs={class:"card-body"},Ys={class:"row g-2 justify-content-center"},to={class:"col-12 text-center"},so={class:"text-normal"},oo={class:"col-5 col-lg-3"},eo={class:"ms-2"},no={key:2,class:"w-100 h-100 d-flex align-items-center justify-content-center"},io={class:"container p-3",style:{"max-width":"512px"}},co={class:"card"},ao={class:"card-header"},lo={class:"row gx-2 align-items-center justify-content-center"},ro=t("div",{class:"col-auto"},[t("img",{src:O,width:"24",height:"24",class:"rounded"})],-1),_o={class:"col-auto"},mo={class:"fs-5 text-white"},po={class:"card-body"},uo={class:"row g-2 justify-content-center"},fo={class:"col-12 text-danger text-center fs-6"},ho={class:"col-12 text-center"},vo={class:"col-5 col-lg-3"},go={href:"https://discord.gg/ZXrggavUpv",target:"_blank",class:"w-100 btn btn-secondary"},bo=t("span",{class:"ms-2"},"Discord",-1),$o={key:0,class:"card-body"},wo={class:"row g-2 justify-content-center"},yo={class:"col-12"},xo={spellcheck:"false",rows:"3",class:"form-control",disabled:"",readonly:""},ko={class:"col-5 col-lg-3"},Co={class:"ms-2"},So={class:"col-5 col-lg-3"},jo={class:"ms-2"},Oo={class:"card-body"},Mo={class:"row g-2 justify-content-center"},Ao={class:"col-12 text-center"},Io={class:"text-normal"},Eo={class:"col-5 col-lg-3"},Lo={class:"ms-2"},Vo={id:"toast-container",class:"toast-container position-fixed bottom-0 end-0 p-3"},To={key:3,class:"w-100 h-100 d-flex align-items-center justify-content-center"},Bo={class:"container p-3",style:{"max-width":"320px"}},No={class:"card card-body"},Wo={class:"row g-2"},Po={class:"col-12"},Do={class:"row gx-2 align-items-center justify-content-center"},Go=t("div",{class:"col-auto"},[t("img",{src:O,width:"24",height:"24",class:"rounded"})],-1),Uo={class:"col-auto"},Fo={class:"fs-5 text-white"},Ro={class:"col-12 text-center"},qo={class:"flicker text-primary"},Yo={__name:"home",setup(h){const l=H(),d=X(),s=w();var c=null;const u=()=>{s.resetInProgress||s.saveAppState(),s.stopGameLoop(),c&&clearInterval(c),window.removeEventListener("beforeunload",u)};setTimeout(()=>{s.startApp(),s.loaded&&(s.startGameLoop(),s.firstTime&&s.showModal("modalWelcome"),c=U(()=>{s.resetInProgress||s.saveAppState()},3e4),window.addEventListener("beforeunload",u))},1e3);const m=I(),b=v(()=>d.meta.title?d.meta.title:d.params.id&&s.loaded?m.elems.find(a=>a.type=="item"&&a.id==d.params.id).name:""),x=v(()=>d.params.id&&s.loaded?m.elems.find(a=>a.type=="item"&&a.id==d.params.id).img:null);Z({title:b});const M=v(()=>{let n=0;return m.elems.filter($=>$.unlocked&&$.type=="milestone"&&$.count<1).forEach($=>{let A=m.elems.find(C=>C.type=="manual"&&C.results[$.id]),p=m.getCosts(A);m.checkCounts(p)&&(n+=1)}),n}),E=v(()=>m.elems.filter(n=>n.unlocked&&n.type=="building").length),N=v(()=>m.elems.filter(n=>n.unlocked&&n.notified&&n.type=="building").length),W=v(()=>[...new Set(m.elems.filter(n=>n.unlocked&&n.type=="item").map(n=>n.group))]);return(n,a)=>{const $=ft,A=It,p=y("font-awesome-icon"),k=B,C=Wt,P=os,L=F,D=R;return r(),_(j,null,[i($),i(A),o(s).loaded?(r(),_("div",es,[t("div",{id:"sidebar",class:J(["bg-dark border-end border-2 border-translucent",{open:o(s).sidebarOpen}])},[t("div",ns,[t("div",is,[t("div",cs,[t("div",as,[ls,t("div",ds,[t("span",rs,e(n.$t("game_title")),1)]),t("div",_s,[t("button",{type:"button",class:"btn btn-primary",onClick:a[0]||(a[0]=f=>{o(s).sidebarOpen=!1})},[i(p,{icon:"fas fa-times","fixed-width":""})])])])]),t("div",ms,[t("div",ps,[t("div",us,[i(k,{to:o(l)("/milestones"),class:"btn btn-primary position-relative d-flex align-items-center justify-content-center",exactActiveClass:"active",onClick:a[1]||(a[1]=f=>{o(s).sidebarOpen=!1})},{default:S(()=>[t("span",fs,[i(p,{icon:"fas fa-check-circle"})]),t("span",hs,e(n.$t("page_milestones")),1),o(M)>0?(r(),_("div",vs,[i(p,{icon:"fas fa-check-circle"})])):g("",!0)]),_:1},8,["to"])]),o(E)>0?(r(),_("div",gs,[i(k,{to:o(l)("/buildings"),class:"btn btn-primary position-relative d-flex align-items-center justify-content-center",exactActiveClass:"active",onClick:a[2]||(a[2]=f=>{o(s).sidebarOpen=!1})},{default:S(()=>[t("span",bs,[i(p,{icon:"fas fa-industry"})]),t("span",$s,e(n.$t("page_buildings")),1),o(N)>0?(r(),_("div",ws,[i(p,{icon:"fas fa-certificate"})])):g("",!0)]),_:1},8,["to"])])):g("",!0)])]),(r(!0),_(j,null,V(o(W),f=>(r(),_("div",{key:f,class:"col-12"},[i(C,{group:f},null,8,["group"])]))),128))])])],2),t("div",ys,[t("div",xs,[t("div",ks,[t("div",Cs,[t("button",{type:"button",class:"btn btn-primary",onClick:a[3]||(a[3]=f=>{o(s).sidebarOpen=!0})},[i(p,{icon:"fas fa-bars","fixed-width":""})])]),t("div",Ss,[t("div",js,[o(x)?(r(),_("div",Os,[t("img",{src:o(x),width:"24",height:"24"},null,8,Ms)])):g("",!0),t("div",As,[t("span",Is,e(n.$t(o(b))),1)])])]),t("div",Es,[t("div",Ls,[t("button",Vs,[i(p,{icon:"fas fa-exclamation-triangle","fixed-width":""}),t("span",Ts,"v"+e(o(s).version),1)]),t("div",Bs," v"+e(o(s).version)+" - "+e(n.$t("disclaimer_text")),1)])]),t("div",Ns,[i(k,{to:o(l)("/options"),class:"btn btn-primary d-flex align-items-center",exactActiveClass:"active",onClick:a[4]||(a[4]=f=>{o(s).sidebarOpen=!1})},{default:S(()=>[t("span",Ws,[i(p,{icon:"fas fa-cog"})]),t("span",Ps,e(n.$t("page_options")),1)]),_:1},8,["to"])])])])]),t("div",Ds,[K(n.$slots,"default")]),i(P)])):o(s).corrupted?(r(),_("div",Gs,[t("div",Us,[t("div",Fs,[t("div",Rs,[t("div",qs,[zs,t("div",Hs,[t("span",Xs,e(n.$t("game_title")),1)])])]),t("div",Zs,[t("div",Js,[t("div",Ks,e(n.$t("screenCorrupted_text")),1)])]),t("div",Qs,[t("div",Ys,[t("div",to,[t("span",so,e(n.$t("screenCorrupted_info")),1)]),t("div",oo,[t("button",{type:"button",class:"w-100 btn btn-danger",onClick:a[5]||(a[5]=f=>o(s).showModal("modalWipe"))},[i(p,{icon:"fas fa-fw fa-skull"}),t("span",eo,e(n.$t("screenCorrupted_wipeSave")),1)])])])])])]),i(L)])):o(s).error?(r(),_("div",no,[t("div",io,[t("div",co,[t("div",ao,[t("div",lo,[ro,t("div",_o,[t("span",mo,e(n.$t("game_title")),1)])])]),t("div",po,[t("div",uo,[t("div",fo,e(n.$t("screenError_text")),1),t("div",ho,e(n.$t("screenError_info1")),1),t("div",vo,[t("a",go,[t("span",null,[i(p,{icon:"fa-brands fa-fw fa-discord"})]),bo])])])]),o(s).localStorageData?(r(),_("div",$o,[t("div",wo,[t("div",yo,[t("textarea",xo,e(o(s).localStorageData),1)]),t("div",ko,[t("button",{type:"button",class:"w-100 btn btn-secondary",onClick:a[6]||(a[6]=f=>o(s).exportAppState())},[i(p,{icon:"fas fa-fw fa-copy"}),t("span",Co,e(n.$t("screenError_exportSave")),1)])]),t("div",So,[t("button",{type:"button",class:"w-100 btn btn btn-secondary",onClick:a[7]||(a[7]=f=>o(s).downloadAppState())},[i(p,{icon:"fas fa-fw fa-download"}),t("span",jo,e(n.$t("screenError_downloadSave")),1)])])])])):g("",!0),t("div",Oo,[t("div",Mo,[t("div",Ao,[t("span",Io,e(n.$t("screenError_info2")),1)]),t("div",Eo,[t("button",{type:"button",class:"w-100 btn btn-danger",onClick:a[8]||(a[8]=f=>o(s).showModal("modalWipe"))},[i(p,{icon:"fas fa-fw fa-skull"}),t("span",Lo,e(n.$t("screenError_wipeSave")),1)])])])])])]),t("div",Vo,[i(D)]),i(L)])):(r(),_("div",To,[t("div",Bo,[t("div",No,[t("div",Wo,[t("div",Po,[t("div",Do,[Go,t("div",Uo,[t("span",Fo,e(n.$t("game_title")),1)])])]),t("div",Ro,[t("span",qo,e(n.$t("screenLoading_text")),1)])])])])]))],64)}}};export{Yo as default};
