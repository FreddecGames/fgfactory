import{S as O,T as M,U as I}from"./TKRQy7cc.js";class B{constructor(e){Object.getOwnPropertyNames(e).forEach(s=>{Object.defineProperty(this,s,Object.getOwnPropertyDescriptor(e,s))}),this.count=this.count?this.count:0,this.max=this.max?this.max:1/0,this.notified=!1,this.unlocked=!this.reqs,this.assign&&(this.assign.count||(this.assign.count=0),this.select||(this.select={count:1,values:[1]})),this.build&&(this.build.status||(this.build.status="waiting"),this.select||(this.select={count:1,values:[1]}))}load(e){e.assignCount&&(this.assign.count=e.assignCount),e.count&&(this.count=e.count),e.notified&&(this.notified=e.notified),e.remainingSeconds&&(this.build.remainingSeconds=e.remainingSeconds),e.selectCount&&(this.select.count=e.selectCount),e.status&&(this.build.status=e.status)}getDataToSave(){let e={};return this.assign&&(e.assignCount=this.assign.count),this.build&&this.build.remainingSeconds&&(e.remainingSeconds=this.build.remainingSeconds),this.build&&this.build.status&&(e.status=this.build.status),this.count&&(e.count=this.count),this.id&&(e.id=this.id),this.notified&&(e.notified=this.notified),this.select&&(e.selectCount=this.select.count),e}}const A=O({id:"game-store",state:()=>({elems:[],victory:!1}),getters:{getElem:t=>e=>t.elems.find(i=>i.id==e),checkElemCounts:t=>e=>{let i=!0;for(let s in e)t.getElem(s).count<e[s]&&(i=!1);return i},checkElemProds:t=>e=>{let i=!0;for(let s in e)t.getElem(s).prod<e[s]&&(i=!1);return i},getAvailableCount:t=>e=>{let s=t.getElem(e).count;return t.elems.filter(y=>y.assign&&y.assign.id==e&&y.assign.count>0).forEach(y=>s-=y.assign.count),s},getBuildCosts:t=>e=>{if(e.build&&e.build.costs){let i={};for(let s in e.build.costs)i[s]=e.build.costs[s]*e.select.count;return i}return null},getBuildInputs:t=>e=>{if(e.build&&e.build.inputs){let i={};for(let s in e.build.inputs)i[s]=e.build.inputs[s]*e.select.count;return i}return null},getBuildResults:t=>e=>{if(e.build&&e.build.result){let i={};if(i[e.id]=e.build.result*e.select.count,e.build.rewards)for(let s in e.build.rewards)i[s]=e.build.rewards[s]*e.select.count;return i}return null},getAssignCosts:t=>e=>{if(e.assign&&e.assign.costs){let i={};for(let s in e.assign.costs)i[s]=e.assign.costs[s]*e.select.count;return i}return null},getAssignInputs:t=>e=>{if(e.assign&&e.assign.inputs){let i={};for(let s in e.assign.inputs)i[s]=e.assign.inputs[s]*e.select.count;return i}return null},getAssignOutputs:t=>e=>{if(e.assign&&e.assign.output){let i={};return i[e.assign.output.id]=e.assign.output.count*e.select.count,i}return null},getAssignStorages:t=>e=>{if(e.assign&&e.assign.storage){let i={};return i[e.assign.storage.id]=e.assign.storage.count*e.select.count,i}return null},isVictoryReached:t=>t.victory?!1:t.terraformationIndex>=5e12},actions:{loadScenario(t){t.elems.forEach(i=>{let s=new B(i);this.elems.push(s)})},loadGameState(t){t.elems!=null&&t.elems.forEach(s=>{let g=this.getElem(s.id);g&&g.load(s)}),this.victory=t.victory??this.victory,this.elems.filter(s=>s.reqs).forEach(s=>{s.unlocked=this.checkElemCounts(s.reqs)}),this.elems.filter(s=>s.assign&&s.assign.count>0||s.build&&s.build.inputs&&s.count>0).forEach(s=>{if(s.build&&s.build.inputs)for(let g in s.build.inputs){let y=this.getElem(g);y.prod-=s.build.inputs[g]*s.count}if(s.assign&&s.assign.inputs)for(let g in s.assign.inputs){let y=this.getElem(g);y.prod-=s.assign.inputs[g]*s.assign.count}if(s.assign&&s.assign.output){let g=this.getElem(s.assign.output.id);g.prod+=s.assign.output.count*s.assign.count}if(s.assign&&s.assign.storage){let g=this.getElem(s.assign.storage.id);g.max+=s.assign.storage.count*s.assign.count}})},computeOfflineProgress(t){this.doTick(t)},saveGameState(t){t.elems=[],this.elems.forEach(e=>t.elems.push(e.getDataToSave())),t.victory=this.victory},doTick(t){this.elems.filter(s=>s.build&&s.build.status==="started").forEach(s=>{s.build.remainingSeconds-=t,s.build.remainingSeconds<=0&&this.onBuild(s)}),this.elems.filter(s=>s.prod>0&&s.count<s.max).forEach(s=>{s.count+=s.prod*t,s.count>=s.max&&(s.count=s.max)})},doVictory(){this.victory=!0},onBuild(t){t.build&&(t.build.status&&(t.build.status="waiting"),t.build.remainingSeconds&&(t.build.remainingSeconds=0));let e=this.getBuildResults(t);if(e)for(let s in e){let g=this.getElem(s);if(g.count>=g.max)continue;let y=e[s];g.count+=y,g.count>=g.max&&(g.count=g.max)}this.elems.filter(s=>s.reqs&&s.unlocked==!1).forEach(s=>{s.notified=!0,s.unlocked=this.checkElemCounts(s.reqs)})}}}),j=window.setInterval;var E={exports:{}};E.exports;(function(t){var e=function(){var i=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",y={};function T(r,n){if(!y[r]){y[r]={};for(var p=0;p<r.length;p++)y[r][r.charAt(p)]=p}return y[r][n]}var x={compressToBase64:function(r){if(r==null)return"";var n=x._compress(r,6,function(p){return s.charAt(p)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(r){return r==null?"":r==""?null:x._decompress(r.length,32,function(n){return T(s,r.charAt(n))})},compressToUTF16:function(r){return r==null?"":x._compress(r,15,function(n){return i(n+32)})+" "},decompressFromUTF16:function(r){return r==null?"":r==""?null:x._decompress(r.length,16384,function(n){return r.charCodeAt(n)-32})},compressToUint8Array:function(r){for(var n=x.compress(r),p=new Uint8Array(n.length*2),a=0,u=n.length;a<u;a++){var h=n.charCodeAt(a);p[a*2]=h>>>8,p[a*2+1]=h%256}return p},decompressFromUint8Array:function(r){if(r==null)return x.decompress(r);for(var n=new Array(r.length/2),p=0,a=n.length;p<a;p++)n[p]=r[p*2]*256+r[p*2+1];var u=[];return n.forEach(function(h){u.push(i(h))}),x.decompress(u.join(""))},compressToEncodedURIComponent:function(r){return r==null?"":x._compress(r,6,function(n){return g.charAt(n)})},decompressFromEncodedURIComponent:function(r){return r==null?"":r==""?null:(r=r.replace(/ /g,"+"),x._decompress(r.length,32,function(n){return T(g,r.charAt(n))}))},compress:function(r){return x._compress(r,16,function(n){return i(n)})},_compress:function(r,n,p){if(r==null)return"";var a,u,h={},S={},w="",v="",f="",b=2,m=3,_=2,l=[],o=0,d=0,c;for(c=0;c<r.length;c+=1)if(w=r.charAt(c),Object.prototype.hasOwnProperty.call(h,w)||(h[w]=m++,S[w]=!0),v=f+w,Object.prototype.hasOwnProperty.call(h,v))f=v;else{if(Object.prototype.hasOwnProperty.call(S,f)){if(f.charCodeAt(0)<256){for(a=0;a<_;a++)o=o<<1,d==n-1?(d=0,l.push(p(o)),o=0):d++;for(u=f.charCodeAt(0),a=0;a<8;a++)o=o<<1|u&1,d==n-1?(d=0,l.push(p(o)),o=0):d++,u=u>>1}else{for(u=1,a=0;a<_;a++)o=o<<1|u,d==n-1?(d=0,l.push(p(o)),o=0):d++,u=0;for(u=f.charCodeAt(0),a=0;a<16;a++)o=o<<1|u&1,d==n-1?(d=0,l.push(p(o)),o=0):d++,u=u>>1}b--,b==0&&(b=Math.pow(2,_),_++),delete S[f]}else for(u=h[f],a=0;a<_;a++)o=o<<1|u&1,d==n-1?(d=0,l.push(p(o)),o=0):d++,u=u>>1;b--,b==0&&(b=Math.pow(2,_),_++),h[v]=m++,f=String(w)}if(f!==""){if(Object.prototype.hasOwnProperty.call(S,f)){if(f.charCodeAt(0)<256){for(a=0;a<_;a++)o=o<<1,d==n-1?(d=0,l.push(p(o)),o=0):d++;for(u=f.charCodeAt(0),a=0;a<8;a++)o=o<<1|u&1,d==n-1?(d=0,l.push(p(o)),o=0):d++,u=u>>1}else{for(u=1,a=0;a<_;a++)o=o<<1|u,d==n-1?(d=0,l.push(p(o)),o=0):d++,u=0;for(u=f.charCodeAt(0),a=0;a<16;a++)o=o<<1|u&1,d==n-1?(d=0,l.push(p(o)),o=0):d++,u=u>>1}b--,b==0&&(b=Math.pow(2,_),_++),delete S[f]}else for(u=h[f],a=0;a<_;a++)o=o<<1|u&1,d==n-1?(d=0,l.push(p(o)),o=0):d++,u=u>>1;b--,b==0&&(b=Math.pow(2,_),_++)}for(u=2,a=0;a<_;a++)o=o<<1|u&1,d==n-1?(d=0,l.push(p(o)),o=0):d++,u=u>>1;for(;;)if(o=o<<1,d==n-1){l.push(p(o));break}else d++;return l.join("")},decompress:function(r){return r==null?"":r==""?null:x._decompress(r.length,32768,function(n){return r.charCodeAt(n)})},_decompress:function(r,n,p){var a=[],u=4,h=4,S=3,w="",v=[],f,b,m,_,l,o,d,c={val:p(0),position:n,index:1};for(f=0;f<3;f+=1)a[f]=f;for(m=0,l=Math.pow(2,2),o=1;o!=l;)_=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=p(c.index++)),m|=(_>0?1:0)*o,o<<=1;switch(m){case 0:for(m=0,l=Math.pow(2,8),o=1;o!=l;)_=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=p(c.index++)),m|=(_>0?1:0)*o,o<<=1;d=i(m);break;case 1:for(m=0,l=Math.pow(2,16),o=1;o!=l;)_=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=p(c.index++)),m|=(_>0?1:0)*o,o<<=1;d=i(m);break;case 2:return""}for(a[3]=d,b=d,v.push(d);;){if(c.index>r)return"";for(m=0,l=Math.pow(2,S),o=1;o!=l;)_=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=p(c.index++)),m|=(_>0?1:0)*o,o<<=1;switch(d=m){case 0:for(m=0,l=Math.pow(2,8),o=1;o!=l;)_=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=p(c.index++)),m|=(_>0?1:0)*o,o<<=1;a[h++]=i(m),d=h-1,u--;break;case 1:for(m=0,l=Math.pow(2,16),o=1;o!=l;)_=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=p(c.index++)),m|=(_>0?1:0)*o,o<<=1;a[h++]=i(m),d=h-1,u--;break;case 2:return v.join("")}if(u==0&&(u=Math.pow(2,S),S++),a[d])w=a[d];else if(d===h)w=b+b.charAt(0);else return null;v.push(w),a[h++]=b+w.charAt(0),u--,b=w,u==0&&(u=Math.pow(2,S),S++)}}};return x}();t!=null?t.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(E);var C=E.exports;const k=M(C),q={};q.id="sfy_vanilla";q.name="sfy_vanilla";q.desc="sfy_vanilla_desc";q.elems=[{type:"milestone",group:"sfy_project",id:"space_elevator",name:"sfy_space_elevator",desc:"sfy_space_elevator_desc",max:1,build:{result:1,costs:{concrete:500,wire:1500,iron_plate:250,iron_rod:400}},reqs:{hub_upgrade_6:1}},{type:"milestone",group:"sfy_tier",id:"hub_upgrade_6",name:"sfy_hub_upgrade_6",desc:"sfy_hub_upgrade_6_desc",max:1,build:{result:1,costs:{concrete:50,wire:100,iron_plate:100,iron_rod:100}},reqs:{hub_upgrade_5:1}},{type:"milestone",group:"sfy_tier",id:"hub_upgrade_5",name:"sfy_hub_upgrade_5",desc:"sfy_hub_upgrade_5_desc",max:1,build:{result:1,rewards:{energy:2e7},costs:{concrete:20,cable:75,iron_rod:75}},reqs:{hub_upgrade_4:1}},{type:"milestone",group:"sfy_tier",id:"hub_upgrade_4",name:"sfy_hub_upgrade_4",desc:"sfy_hub_upgrade_4_desc",max:1,build:{result:1,costs:{concrete:10,cable:50,iron_rod:75}},reqs:{hub_upgrade_3:1}},{type:"milestone",group:"sfy_tier",id:"hub_upgrade_3",name:"sfy_hub_upgrade_3",desc:"sfy_hub_upgrade_3_desc",max:1,build:{result:1,costs:{wire:20,iron_plate:20,iron_rod:20}},reqs:{hub_upgrade_2:1}},{type:"milestone",group:"sfy_tier",id:"hub_upgrade_2",name:"sfy_hub_upgrade_2",desc:"sfy_hub_upgrade_2_desc",max:1,build:{result:1,rewards:{energy:2e7},costs:{iron_plate:10,iron_rod:20}},reqs:{hub_upgrade_1:1}},{type:"milestone",group:"sfy_tier",id:"hub_upgrade_1",name:"sfy_hub_upgrade_1",desc:"sfy_hub_upgrade_1_desc",max:1,build:{result:1,costs:{iron_rod:10}},reqs:{intro:1}},{type:"milestone",group:"sfy_start",id:"intro",name:"sfy_intro",desc:"sfy_intro_desc",max:1,build:{result:1}},{type:"item",group:"sfy_power",id:"energy",name:"sfy_energy",desc:"sfy_energy_desc",img:"/fgfactory/icons/energy.png",reqs:{hub_upgrade_2:1}},{type:"item",group:"sfy_generators",id:"biomass_burner",name:"sfy_biomass_burner",desc:"sfy_biomass_burner_desc",img:"/fgfactory/icons/biomass_burner.png",build:{result:1,seconds:.25,rewards:{energy:3e7},costs:{wire:25,iron_plate:15,iron_rod:15},inputs:{biomass:.1}},reqs:{hub_upgrade_6:1}},{type:"item",group:"sfy_machines",id:"constructor",name:"sfy_constructor",desc:"sfy_constructor_desc",img:"/fgfactory/icons/constructor.png",build:{result:1,seconds:.25,costs:{cable:8,iron_plate_2:2}},reqs:{hub_upgrade_3:1}},{type:"item",group:"sfy_machines",id:"smelter",name:"sfy_smelter",desc:"sfy_smelter_desc",img:"/fgfactory/icons/smelter.png",build:{result:1,seconds:.25,costs:{wire:8,iron_rod:5}},reqs:{hub_upgrade_2:1}},{type:"item",group:"sfy_machines",id:"miner_1",name:"sfy_miner_1",desc:"sfy_miner_1_desc",img:"/fgfactory/icons/miner_1.png",build:{result:1,seconds:.25,costs:{concrete:10,iron_plate:10,iron_plate:12,iron_rod:4}},reqs:{hub_upgrade_5:1}},{type:"item",group:"sfy_machines",id:"miner",name:"sfy_miner",desc:"sfy_miner_desc",max:1,img:"/fgfactory/icons/miner.png",build:{result:1,seconds:.25,costs:{iron_plate:2,iron_rod:4}},reqs:{hub_upgrade_1:1}},{type:"item",group:"sfy_containers",id:"box_1",name:"sfy_box_1",desc:"sfy_box_1_desc",img:"/fgfactory/icons/box_1.png",build:{result:1,seconds:.25,costs:{iron_plate:10,iron_rod:10}},reqs:{hub_upgrade_5:1}},{type:"item",group:"sfy_containers",id:"box",name:"sfy_box",desc:"sfy_box_desc",max:1,img:"/fgfactory/icons/box.png",build:{result:1,seconds:.25,costs:{iron_plate:6,iron_rod:6}},reqs:{hub_upgrade_1:1}},{type:"item",group:"sfy_materials",id:"concrete",name:"sfy_concrete",desc:"sfy_concrete_desc",max:500,img:"/fgfactory/icons/concrete.png",prod:0,build:{result:1,seconds:.5,costs:{stone:3}},reqs:{hub_upgrade_3:1}},{type:"item",group:"sfy_materials",id:"cable",name:"sfy_cable",desc:"sfy_cable_desc",max:200,img:"/fgfactory/icons/cable.png",prod:0,build:{result:1,seconds:.25,costs:{wire:2}},reqs:{hub_upgrade_3:1}},{type:"item",group:"sfy_materials",id:"wire",name:"sfy_wire",desc:"sfy_wire_desc",max:500,img:"/fgfactory/icons/wire.png",prod:0,build:{result:2,seconds:.5,costs:{copper_ingot:1}},reqs:{hub_upgrade_2:1}},{type:"item",group:"sfy_materials",id:"copper_ingot",name:"sfy_copper_ingot",desc:"sfy_copper_ingot_desc",max:100,img:"/fgfactory/icons/copper_ingot.png",prod:0,build:{result:1,seconds:.75,costs:{copper_ore:1}},reqs:{hub_upgrade_2:1}},{type:"item",group:"sfy_materials",id:"iron_plate_2",name:"sfy_iron_plate_2",desc:"sfy_iron_plate_2_desc",max:100,img:"/fgfactory/icons/iron_plate_2.png",prod:0,build:{result:1,seconds:1.5,costs:{screw:12,iron_plate:6}},reqs:{hub_upgrade_3:1}},{type:"item",group:"sfy_materials",id:"iron_plate",name:"sfy_iron_plate",desc:"sfy_iron_plate_desc",max:200,img:"/fgfactory/icons/iron_plate.png",prod:0,build:{result:2,seconds:.75,costs:{iron_ingot:3}},reqs:{hub_upgrade_1:1}},{type:"item",group:"sfy_materials",id:"screw",name:"sfy_screw",desc:"sfy_screw_desc",max:500,img:"/fgfactory/icons/screw.png",prod:0,build:{result:4,seconds:.75,costs:{iron_rod:1}},reqs:{hub_upgrade_3:1}},{type:"item",group:"sfy_materials",id:"iron_rod",name:"sfy_iron_rod",desc:"sfy_iron_rod_desc",max:200,img:"/fgfactory/icons/iron_rod.png",prod:0,build:{result:1,seconds:.25,costs:{iron_ingot:1}},reqs:{intro:1}},{type:"item",group:"sfy_materials",id:"iron_ingot",name:"sfy_iron_ingot",desc:"sfy_iron_ingot_desc",max:100,img:"/fgfactory/icons/iron_ingot.png",prod:0,build:{result:1,seconds:.75,costs:{iron_ore:1}},reqs:{intro:1}},{type:"item",group:"sfy_raw",id:"biomass",name:"sfy_biomass",desc:"sfy_biomass_desc",max:200,img:"/fgfactory/icons/biomass.png",prod:0,build:{result:1,seconds:.25},reqs:{hub_upgrade_6:1}},{type:"item",group:"sfy_raw",id:"stone",name:"sfy_stone",desc:"sfy_stone_desc",max:100,img:"/fgfactory/icons/stone.png",prod:0,build:{result:1,seconds:.25},reqs:{hub_upgrade_3:1}},{type:"item",group:"sfy_raw",id:"copper_ore",name:"sfy_copper_ore",desc:"sfy_copper_ore_desc",img:"/fgfactory/icons/copper.png",max:100,prod:0,build:{result:1,seconds:.25},reqs:{hub_upgrade_2:1}},{type:"item",group:"sfy_raw",id:"iron_ore",name:"sfy_iron_ore",desc:"sfy_iron_ore_desc",img:"/fgfactory/icons/iron.png",max:100,prod:0,build:{result:1,seconds:.25},reqs:{intro:1}},{type:"recipe",id:"constructor_concrete",name:"sfy_concrete",img:"/fgfactory/icons/concrete.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"concrete",count:.25},inputs:{stone:.75}},reqs:{hub_upgrade_3:1}},{type:"recipe",id:"constructor_cable",name:"sfy_cable",img:"/fgfactory/icons/cable.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"cable",count:.5},inputs:{wire:1}},reqs:{hub_upgrade_3:1}},{type:"recipe",id:"constructor_wire",name:"sfy_wire",img:"/fgfactory/icons/wire.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"wire",count:.5},inputs:{copper_ingot:.25}},reqs:{hub_upgrade_3:1}},{type:"recipe",id:"constructor_iron_plate",name:"sfy_iron_plate",img:"/fgfactory/icons/iron_plate.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"iron_plate",count:.25},inputs:{iron_ingot:.5}},reqs:{hub_upgrade_3:1}},{type:"recipe",id:"constructor_screw",name:"sfy_screw",img:"/fgfactory/icons/screw.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"screw",count:.5},inputs:{iron_rod:.1}},reqs:{hub_upgrade_3:1}},{type:"recipe",id:"constructor_iron_rod",name:"sfy_iron_rod",img:"/fgfactory/icons/iron_rod.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"iron_rod",count:.25},inputs:{iron_ingot:.25}},reqs:{hub_upgrade_3:1}},{type:"recipe",id:"smelter_copper_ingot",name:"sfy_copper_ingot",img:"/fgfactory/icons/copper_ingot.png",assign:{id:"smelter",costs:{energy:4e6},output:{id:"copper_ingot",count:.5},inputs:{copper_ore:.5}},reqs:{hub_upgrade_2:1}},{type:"recipe",id:"smelter_iron_ingot",name:"sfy_iron_ingot",img:"/fgfactory/icons/iron_ingot.png",assign:{id:"smelter",costs:{energy:4e6},output:{id:"iron_ingot",count:.5},inputs:{iron_ore:.5}},reqs:{hub_upgrade_2:1}},{type:"recipe",id:"miner_1_biomass",name:"sfy_biomass",img:"/fgfactory/icons/biomass.png",assign:{id:"miner_1",costs:{energy:5e6},output:{id:"biomass",count:1}},reqs:{hub_upgrade_6:1}},{type:"recipe",id:"miner_1_stone",name:"sfy_stone",img:"/fgfactory/icons/stone.png",assign:{id:"miner_1",costs:{energy:5e6},output:{id:"stone",count:1}},reqs:{hub_upgrade_5:1}},{type:"recipe",id:"miner_1_copper_ore",name:"sfy_copper_ore",img:"/fgfactory/icons/copper.png",assign:{id:"miner_1",costs:{energy:5e6},output:{id:"copper_ore",count:1}},reqs:{hub_upgrade_5:1}},{type:"recipe",id:"miner_1_iron_ore",name:"sfy_iron_ore",img:"/fgfactory/icons/iron.png",assign:{id:"miner_1",costs:{energy:5e6},output:{id:"iron_ore",count:1}},reqs:{hub_upgrade_5:1}},{type:"recipe",id:"miner_biomass",name:"sfy_biomass",img:"/fgfactory/icons/biomass.png",assign:{id:"miner",output:{id:"biomass",count:.5}},reqs:{hub_upgrade_6:1}},{type:"recipe",id:"miner_stone",name:"sfy_stone",img:"/fgfactory/icons/stone.png",assign:{id:"miner",output:{id:"stone",count:.5}},reqs:{hub_upgrade_3:1}},{type:"recipe",id:"miner_copper_ore",name:"sfy_copper_ore",img:"/fgfactory/icons/copper.png",assign:{id:"miner",output:{id:"copper_ore",count:.5}},reqs:{hub_upgrade_2:1}},{type:"recipe",id:"miner_iron_ore",name:"sfy_iron_ore",img:"/fgfactory/icons/iron.png",assign:{id:"miner",output:{id:"iron_ore",count:.5}},reqs:{hub_upgrade_1:1}},{type:"storage",id:"box_1_concrete",name:"sfy_concrete",img:"/fgfactory/icons/concrete.png",assign:{id:"box_1",storage:{id:"concrete",count:500}},reqs:{hub_upgrade_5:1}},{type:"storage",id:"box_1_stone",name:"sfy_stone",img:"/fgfactory/icons/stone.png",assign:{id:"box_1",storage:{id:"stone",count:100}},reqs:{hub_upgrade_5:1}},{type:"storage",id:"box_1_cable",name:"sfy_cable",img:"/fgfactory/icons/cable.png",assign:{id:"box_1",storage:{id:"cable",count:200}},reqs:{hub_upgrade_5:1}},{type:"storage",id:"box_1_wire",name:"sfy_wire",img:"/fgfactory/icons/wire.png",assign:{id:"box_1",storage:{id:"wire",count:500}},reqs:{hub_upgrade_5:1}},{type:"storage",id:"box_1_copper_ingot",name:"sfy_copper_ingot",img:"/fgfactory/icons/copper_ingot.png",assign:{id:"box_1",storage:{id:"copper_ingot",count:100}},reqs:{hub_upgrade_5:1}},{type:"storage",id:"box_1_copper_ore",name:"sfy_copper_ore",img:"/fgfactory/icons/copper.png",assign:{id:"box_1",storage:{id:"copper_ore",count:100}},reqs:{hub_upgrade_5:1}},{type:"storage",id:"box_1_iron_plate_2",name:"sfy_iron_plate_2",img:"/fgfactory/icons/iron_plate_2.png",assign:{id:"box_1",storage:{id:"iron_plate_2",count:100}},reqs:{hub_upgrade_5:1}},{type:"storage",id:"box_1_iron_plate",name:"sfy_iron_plate",img:"/fgfactory/icons/iron_plate.png",assign:{id:"box_1",storage:{id:"iron_plate",count:200}},reqs:{hub_upgrade_5:1}},{type:"storage",id:"box_1_screw",name:"sfy_screw",img:"/fgfactory/icons/screw.png",assign:{id:"box_1",storage:{id:"screw",count:500}},reqs:{hub_upgrade_5:1}},{type:"storage",id:"box_1_iron_rod",name:"sfy_iron_rod",img:"/fgfactory/icons/iron_rod.png",assign:{id:"box_1",storage:{id:"iron_rod",count:200}},reqs:{hub_upgrade_5:1}},{type:"storage",id:"box_1_iron_ingot",name:"sfy_iron_ingot",img:"/fgfactory/icons/iron_ingot.png",assign:{id:"box_1",storage:{id:"iron_ingot",count:100}},reqs:{hub_upgrade_5:1}},{type:"storage",id:"box_1_iron_ore",name:"sfy_iron_ore",img:"/fgfactory/icons/iron.png",assign:{id:"box_1",storage:{id:"iron_ore",count:100}},reqs:{hub_upgrade_5:1}},{type:"storage",id:"box_1_biomass",name:"sfy_biomass",img:"/fgfactory/icons/biomass.png",assign:{id:"box_1",storage:{id:"biomass",count:200}},reqs:{hub_upgrade_6:1}},{type:"storage",id:"box_concrete",name:"sfy_concrete",img:"/fgfactory/icons/concrete.png",assign:{id:"box",storage:{id:"concrete",count:250}},reqs:{hub_upgrade_3:1}},{type:"storage",id:"box_stone",name:"sfy_stone",img:"/fgfactory/icons/stone.png",assign:{id:"box",storage:{id:"stone",count:50}},reqs:{hub_upgrade_3:1}},{type:"storage",id:"box_cable",name:"sfy_cable",img:"/fgfactory/icons/cable.png",assign:{id:"box",storage:{id:"cable",count:100}},reqs:{hub_upgrade_3:1}},{type:"storage",id:"box_wire",name:"sfy_wire",img:"/fgfactory/icons/wire.png",assign:{id:"box",storage:{id:"wire",count:250}},reqs:{hub_upgrade_2:1}},{type:"storage",id:"box_copper_ingot",name:"sfy_copper_ingot",img:"/fgfactory/icons/copper_ingot.png",assign:{id:"box",storage:{id:"copper_ingot",count:50}},reqs:{hub_upgrade_2:1}},{type:"storage",id:"box_copper_ore",name:"sfy_copper_ore",img:"/fgfactory/icons/copper.png",assign:{id:"box",storage:{id:"copper_ore",count:50}},reqs:{hub_upgrade_2:1}},{type:"storage",id:"box_iron_plate_2",name:"sfy_iron_plate_2",img:"/fgfactory/icons/iron_plate_2.png",assign:{id:"box",storage:{id:"iron_plate_2",count:50}},reqs:{hub_upgrade_3:1}},{type:"storage",id:"box_iron_plate",name:"sfy_iron_plate",img:"/fgfactory/icons/iron_plate.png",assign:{id:"box",storage:{id:"iron_plate",count:100}},reqs:{hub_upgrade_1:1}},{type:"storage",id:"box_screw",name:"sfy_screw",img:"/fgfactory/icons/screw.png",assign:{id:"box",storage:{id:"screw",count:250}},reqs:{hub_upgrade_3:1}},{type:"storage",id:"box_iron_rod",name:"sfy_iron_rod",img:"/fgfactory/icons/iron_rod.png",assign:{id:"box",storage:{id:"iron_rod",count:100}},reqs:{hub_upgrade_1:1}},{type:"storage",id:"box_iron_ingot",name:"sfy_iron_ingot",img:"/fgfactory/icons/iron_ingot.png",assign:{id:"box",storage:{id:"iron_ingot",count:50}},reqs:{hub_upgrade_1:1}},{type:"storage",id:"box_iron_ore",name:"sfy_iron_ore",img:"/fgfactory/icons/iron.png",assign:{id:"box",storage:{id:"iron_ore",count:50}},reqs:{hub_upgrade_1:1}},{type:"storage",id:"box_biomass",name:"sfy_biomass",img:"/fgfactory/icons/biomass.png",assign:{id:"box",storage:{id:"biomass",count:100}},reqs:{hub_upgrade_6:1}}];const U=O({id:"app-store",state:()=>({collapsed:[],currentModalId:null,currentScenarioId:null,error:null,firstTime:!0,gameTabId:"milestones",isAppRunning:!1,loaded:!1,lastSavedTime:Date.now(),localStorageName:"fgfactory",loopInterval:null,offlineTime:0,resetInProgress:!1,version:.01,scenarios:[q]}),getters:{localStorageData:t=>localStorage.getItem(t.localStorageName),isCollapsed:t=>e=>t.collapsed.includes(e),currentScenario:t=>t.scenarios.find(e=>e.id==t.currentScenarioId)},actions:{startApp(){if(this.loaded==!0)return;this.error=null,this.loaded=!1;let t=A();try{let e=localStorage.getItem(this.localStorageName);if(e&&e!==null&&e.length%4==0){let i=k.decompressFromBase64(e);if(!i)throw"Local data corrupted";e=JSON.parse(i),console.log(e),this.loadAppState(e);let s=this.scenarios.find(g=>g.id==this.currentScenarioId);t.loadScenario(s),t.loadGameState(e)}else{this.currentScenarioId=this.scenarios[0].id;let i=this.scenarios.find(s=>s.id==this.currentScenarioId);t.loadScenario(i)}this.computeOfflineProgress(),this.loaded=!0}catch(e){this.error=e,console.error(this.error)}},loadAppState(t){this.collapsed=t.collapsed??this.collapsed,this.currentScenarioId=t.currentScenarioId??this.currentScenarioId,this.firstTime=t.firstTime??this.firstTime,this.gameTabId=t.gameTabId??this.gameTabId,this.lastSavedTime=t.lastSavedTime??this.lastSavedTime},computeOfflineProgress(){let e=(Date.now()-this.lastSavedTime)/1e3;e>15*60&&(this.offlineTime=e,this.showModal("modalOffline")),A().computeOfflineProgress(e)},saveAppState(){this.lastSavedTime=Date.now();let t={};t.collapsed=this.collapsed,t.currentScenarioId=this.currentScenarioId,t.firstTime=this.firstTime,t.gameTabId=this.gameTabId,t.lastSavedTime=this.lastSavedTime,A().saveGameState(t),console.log(t);let i=JSON.stringify(t),s=k.compressToBase64(i);localStorage.setItem(this.localStorageName,s)},exportAppState(){navigator.clipboard.writeText(this.localStorageData),this.showToast("toastExport")},downloadAppState(){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(this.localStorageData)),t.setAttribute("download",this.localStorageName+"_save_"+new Date().getTime()+".txt"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},importAppState(){let e=document.getElementById("importData").value.trim();if(!e)return this.showToast("toastImportEmpty");if(e.length%4!==0)return this.showToast("toastImportCorrupted");this.resetInProgress=!0,localStorage.setItem(this.localStorageName,e),window.location.replace("/fgfactory/game")},wipeAppState(){this.resetInProgress=!0,localStorage.removeItem(this.localStorageName),window.location.replace("/fgfactory/game")},startGameLoop(){if(this.isAppRunning)return;this.isAppRunning=!0;let t=1/60,e=performance.now(),i=0,s=()=>{let g=A(),y=performance.now(),T=(y-e)/1e3;i+=T,i>=t&&(g.doTick(t),i-=t),e=y,g.isVictoryReached&&(g.doVictory(),this.showModal("modalVictory"))};this.loopInterval=j(()=>{s()},t*1e3)},stopGameLoop(){this.isAppRunning=!1,this.loopInterval&&clearInterval(this.loopInterval)},showToast(t){let e=document.getElementById(t);new I.Toast(e).show()},showModal(t){if(this.currentModalId==t)return;this.currentModalId=t;let e=document.getElementById(t);new I.Modal(e).show()},toggleCollapsed(t){if(this.isCollapsed(t)){let e=this.collapsed.indexOf(t);this.collapsed.splice(e,1)}else this.collapsed.push(t)}}});export{U as a,j as s,A as u};
