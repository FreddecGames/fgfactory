import{a as G}from"./CYMVvgqh.js";import{a as y,u as M,s as U}from"./DpAc4zup.js";import{r as C,o as l,c as r,a as t,t as e,h as o,b as i,d as z,j as b,f as g,g as F,w as x,F as L,i as V,q as T,y as R,m as q,u as H,n as X,z as Z}from"./VKx6-eEe.js";import{_ as B}from"./C-27JOya.js";import{_ as J}from"./Cj-6qiLh.js";import{a as K,_ as Q}from"./EKMvFEcb.js";import"./DlAUqK2U.js";const Y={id:"modalOffline",class:"modal fade"},tt={class:"modal-dialog"},st={class:"modal-content"},ot={class:"modal-header"},et={class:"fs-6 text-white"},nt={class:"modal-body"},it={class:"row g-2"},ct={class:"col-12 text-center"},at={class:"fs-6 text-white"},lt={class:"col-12 text-center"},dt={class:"text-normal"},rt={class:"text-white"},_t={class:"col-12 mt-3"},mt={class:"row justify-content-center"},pt={class:"col-5 col-lg-3"},ut={class:"ms-2"},ft={__name:"ModalOffline",setup(h){const a=y();return(d,s)=>{const m=C("font-awesome-icon");return l(),r("div",Y,[t("div",tt,[t("div",st,[t("div",ot,[t("span",et,e(d.$t("modalOffline_title")),1),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:s[0]||(s[0]=_=>o(a).currentModalId=null)},[i(m,{icon:"fas fa-fw fa-times"})])]),t("div",nt,[t("div",it,[t("div",ct,[t("span",at,e(d.$t("modalOffline_text")),1)]),t("div",lt,[t("span",dt,e(d.$t("modalOffline_info")),1),z(),t("span",rt,e(o(G)(o(a).offlineTime)),1)]),t("div",_t,[t("div",mt,[t("div",pt,[t("button",{type:"button",class:"w-100 btn btn-secondary","data-bs-dismiss":"modal",onClick:s[1]||(s[1]=_=>o(a).currentModalId=null)},[t("span",null,[i(m,{icon:"fas fa-fw fa-arrow-right-long"})]),t("span",ut,e(d.$t("modalOffline_close")),1)])])])])])])])])])}}},ht={id:"modalWelcome",class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false"},vt={class:"modal-dialog"},gt={class:"modal-content"},bt={class:"modal-body"},$t={class:"row g-2"},wt={key:0,class:"col-12 text-center"},yt={class:"fs-5 text-white"},kt={class:"col-12"},xt={class:"rounded p-2 text-bg-danger text-center"},Ct={class:"col-12 text-center"},St={key:0},jt={class:"col-12 mt-3"},Ot={class:"row justify-content-center"},At={class:"col-5 col-lg-3"},Lt={class:"ms-2"},Mt={__name:"ModalWelcome",setup(h){const a=y(),d=function(){a.currentModalId=null,a.firstTime=!1};return(s,m)=>{const _=C("font-awesome-icon");return l(),r("div",ht,[t("div",vt,[t("div",gt,[t("div",bt,[t("div",$t,[o(a).currentScenario?(l(),r("div",wt,[t("div",yt,e(s.$t(o(a).currentScenario.title)),1),t("div",null,e(s.$t(o(a).currentScenario.subtitle)),1)])):b("",!0),t("div",kt,[t("div",xt," v"+e(o(a).version)+" - "+e(s.$t("disclaimer_text")),1)]),t("div",Ct,[o(a).currentScenario?(l(),r("div",St,e(s.$t(o(a).currentScenario.desc)),1)):b("",!0)]),t("div",jt,[t("div",Ot,[t("div",At,[t("button",{type:"button",class:"w-100 btn btn-success","data-bs-dismiss":"modal",onClick:m[0]||(m[0]=u=>d())},[t("span",null,[i(_,{icon:"fas fa-fw fa-arrow-right-long"})]),t("span",Lt,e(s.$t("modalWelcome_close")),1)])])])])])])])])])}}},It=["src"],Et={class:"position-absolute lh-1 badge bg-dark",style:{top:"-.25rem",right:"-.5rem"}},Vt={key:0,class:"position-absolute top-0 start-0 lh-1 small text-success"},Tt={key:1,class:"w-100 btn btn-secondary",disabled:""},Bt={__name:"SidebarButton",props:["id"],setup(h){const a=h,d=y(),s=M(),m=g(()=>s.elems.find(_=>_.id==a.id));return(_,u)=>{const w=J,v=C("font-awesome-icon"),O=B;return o(m).unlocked?(l(),F(O,{key:0,to:_.localePath("/item/"+h.id),class:"w-100 btn btn-primary position-relative",exactActiveClass:"active",onClick:u[0]||(u[0]=I=>{o(d).sidebarOpen=!1,o(m).notified=!1}),title:_.$t(o(m).name)},{default:x(()=>[t("img",{src:o(m).img,width:"18",height:"18"},null,8,It),t("div",Et,[i(w,{id:h.id},null,8,["id"])]),o(m).notified?(l(),r("div",Vt,[i(v,{icon:"fas fa-certificate"})])):b("",!0)]),_:1},8,["to","title"])):(l(),r("button",Tt,[i(v,{icon:"fas fa-lock","fixed-width":""})]))}}},Nt={class:"row g-1 justify-content-center"},Wt={class:"col-12 text-subtitle text-center"},Pt={__name:"SidebarGroup",props:["group"],setup(h){const a=h,d=y(),s=M(),m=g(()=>s.elems.filter(_=>(d.showLocked?!0:_.unlocked)&&_.type=="item"&&_.group==a.group).map(_=>_.id));return(_,u)=>{const w=Bt;return l(),r("div",Nt,[t("div",Wt,e(_.$t(h.group)),1),(l(!0),r(L,null,V(o(m),v=>(l(),r("div",{key:v,class:"col-2"},[i(w,{id:v},null,8,["id"])]))),128))])}}},Dt=T("/victory.png"),Gt={id:"modalVictory",class:"modal fade"},Ut={class:"modal-dialog"},zt={class:"modal-content"},Ft={class:"modal-header bg-secondary"},Rt={class:"fs-6 text-white"},qt={class:"modal-body"},Ht={class:"row g-2"},Xt={class:"col-12 text-center"},Zt={class:"fs-5 text-white"},Jt={class:"col-12 text-center"},Kt={class:"text-normal"},Qt=t("div",{class:"col-12 text-center"},[t("img",{src:Dt,width:"48",height:"48"})],-1),Yt={class:"col-12 mt-3"},ts={class:"row justify-content-center"},ss={class:"col-5 col-lg-3"},os={class:"ms-2"},es={__name:"ModalVictory",setup(h){const a=y();return(d,s)=>{const m=C("font-awesome-icon");return l(),r("div",Gt,[t("div",Ut,[t("div",zt,[t("div",Ft,[t("span",Rt,e(d.$t("modalVictory_title")),1),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:s[0]||(s[0]=_=>o(a).currentModalId=null)},[i(m,{icon:"fas fa-fw fa-times"})])]),t("div",qt,[t("div",Ht,[t("div",Xt,[t("span",Zt,e(d.$t("modalVictory_subTitle")),1)]),t("div",Jt,[t("span",Kt,e(d.$t("modalVictory_text")),1)]),Qt,t("div",Yt,[t("div",ts,[t("div",ss,[t("button",{type:"button",class:"w-100 btn btn-success","data-bs-dismiss":"modal",onClick:s[1]||(s[1]=_=>o(a).currentModalId=null)},[t("span",null,[i(m,{icon:"fas fa-fw fa-trophy"})]),t("span",os,e(d.$t("modalVictory_close")),1)])])])])])])])])])}}},j=T("/favicon.png"),ns={key:0,class:"w-100 h-100 d-flex"},is={class:"h-100 px-3 py-2 scroll-content"},cs={class:"row g-3"},as={class:"col-12"},ls={class:"row g-2 align-items-center justify-content-lg-center"},ds=t("div",{class:"col-auto"},[t("img",{src:j,width:"24",height:"24",class:"rounded"})],-1),rs={class:"col col-lg-auto"},_s={class:"fs-5 text-white"},ms={class:"col-auto d-lg-none"},ps={class:"col-12"},us={class:"row g-1 justify-content-center"},fs={class:"col-6"},hs={class:"ms-0"},vs={class:"ms-2"},gs={key:0,class:"position-absolute top-0 end-0 lh-1 small text-success"},bs={key:0,class:"col-6"},$s={class:"ms-0"},ws={class:"ms-2"},ys={key:0,class:"position-absolute top-0 start-0 lh-1 small text-success"},ks={id:"topbar",class:"bg-dark border-bottom border-2 border-translucent"},xs={class:"px-3 py-2"},Cs={class:"row g-2 align-items-center flex-nowrap"},Ss={class:"col-auto d-lg-none"},js={class:"col text-truncate"},Os={class:"row g-2 align-items-center flex-nowrap"},As={key:0,class:"col-auto"},Ls=["src"],Ms={class:"col text-truncate"},Is={class:"fs-5 text-white"},Es={class:"col-auto"},Vs={class:"dropdown"},Ts={type:"button",class:"btn btn-danger","data-bs-toggle":"dropdown","aria-expanded":"false"},Bs={class:"d-none d-lg-inline ms-1"},Ns={class:"dropdown-menu dropdown-menu-end p-2 text-bg-danger text-center"},Ws={class:"col-auto"},Ps={class:"ms-0"},Ds={class:"d-none d-lg-inline ms-2"},Gs={class:"col-auto"},Us={class:"ms-0"},zs={class:"d-none d-lg-inline ms-2"},Fs={id:"page",class:"w-100 scroll-content"},Rs={key:1,class:"w-100 h-100 d-flex align-items-center justify-content-center"},qs={class:"container p-3",style:{"max-width":"512px"}},Hs={class:"card"},Xs={class:"card-header"},Zs={class:"row gx-2 align-items-center justify-content-center"},Js=t("div",{class:"col-auto"},[t("img",{src:j,width:"24",height:"24",class:"rounded"})],-1),Ks={class:"col-auto"},Qs={class:"fs-5 text-white"},Ys={class:"card-body"},to={class:"row g-2 justify-content-center"},so={class:"col-12 text-danger text-center fs-6"},oo={class:"card-body"},eo={class:"row g-2 justify-content-center"},no={class:"col-12 text-center"},io={class:"text-normal"},co={class:"col-5 col-lg-3"},ao={class:"ms-2"},lo={key:2,class:"w-100 h-100 d-flex align-items-center justify-content-center"},ro={class:"container p-3",style:{"max-width":"512px"}},_o={class:"card"},mo={class:"card-header"},po={class:"row gx-2 align-items-center justify-content-center"},uo=t("div",{class:"col-auto"},[t("img",{src:j,width:"24",height:"24",class:"rounded"})],-1),fo={class:"col-auto"},ho={class:"fs-5 text-white"},vo={class:"card-body"},go={class:"row g-2 justify-content-center"},bo={class:"col-12 text-danger text-center fs-6"},$o={class:"col-12 text-center"},wo={class:"col-5 col-lg-3"},yo={href:"https://discord.gg/ZXrggavUpv",target:"_blank",class:"w-100 btn btn-secondary"},ko=t("span",{class:"ms-2"},"Discord",-1),xo={key:0,class:"card-body"},Co={class:"row g-2 justify-content-center"},So={class:"col-12"},jo={spellcheck:"false",rows:"3",class:"form-control",disabled:"",readonly:""},Oo={class:"col-5 col-lg-3"},Ao={class:"ms-2"},Lo={class:"col-5 col-lg-3"},Mo={class:"ms-2"},Io={class:"card-body"},Eo={class:"row g-2 justify-content-center"},Vo={class:"col-12 text-center"},To={class:"text-normal"},Bo={class:"col-5 col-lg-3"},No={class:"ms-2"},Wo={id:"toast-container",class:"toast-container position-fixed bottom-0 end-0 p-3"},Po={key:3,class:"w-100 h-100 d-flex align-items-center justify-content-center"},Do={class:"container p-3",style:{"max-width":"320px"}},Go={class:"card card-body"},Uo={class:"row g-2"},zo={class:"col-12"},Fo={class:"row gx-2 align-items-center justify-content-center"},Ro=t("div",{class:"col-auto"},[t("img",{src:j,width:"24",height:"24",class:"rounded"})],-1),qo={class:"col-auto"},Ho={class:"fs-5 text-white"},Xo={class:"col-12 text-center"},Zo={class:"flicker text-primary"},ee={__name:"home",setup(h){const a=R(),d=q(),s=y();var m=null;const _=()=>{s.resetInProgress||s.saveAppState(),s.stopGameLoop(),m&&clearInterval(m),window.removeEventListener("beforeunload",_)};setTimeout(()=>{s.startApp(),s.loaded&&(s.startGameLoop(),s.firstTime&&s.showModal("modalWelcome"),m=U(()=>{s.resetInProgress||s.saveAppState()},3e4),window.addEventListener("beforeunload",_))},1e3);const u=M(),w=g(()=>d.meta.title?d.meta.title:d.params.id&&s.loaded?u.elems.find(c=>c.type=="item"&&c.id==d.params.id).name:""),v=g(()=>d.params.id&&s.loaded?u.elems.find(c=>c.type=="item"&&c.id==d.params.id).img:null);H({title:w});const O=g(()=>{let n=0;return u.elems.filter($=>$.unlocked&&$.type=="milestone"&&$.count<1).forEach($=>{let A=u.elems.find(S=>S.type=="manual"&&S.results[$.id]),p=u.getCosts(A);u.checkCounts(p)&&(n+=1)}),n}),I=g(()=>u.elems.filter(n=>n.unlocked&&n.type=="building").length),N=g(()=>u.elems.filter(n=>n.unlocked&&n.notified&&n.type=="building").length),W=g(()=>[...new Set(u.elems.filter(n=>(s.showLocked?!0:n.unlocked)&&n.type=="item").map(n=>n.group))]);return(n,c)=>{const $=ft,A=Mt,p=C("font-awesome-icon"),k=B,S=Pt,P=es,E=K,D=Q;return l(),r(L,null,[i($),i(A),o(s).loaded?(l(),r("div",ns,[t("div",{id:"sidebar",class:X(["bg-dark border-end border-2 border-translucent",{open:o(s).sidebarOpen}])},[t("div",is,[t("div",cs,[t("div",as,[t("div",ls,[ds,t("div",rs,[t("span",_s,e(n.$t("game_title")),1)]),t("div",ms,[t("button",{type:"button",class:"btn btn-primary",onClick:c[0]||(c[0]=f=>{o(s).sidebarOpen=!1})},[i(p,{icon:"fas fa-times","fixed-width":""})])])])]),t("div",ps,[t("div",us,[t("div",fs,[i(k,{to:o(a)("/milestones"),class:"btn btn-primary position-relative d-flex align-items-center justify-content-center",exactActiveClass:"active",onClick:c[1]||(c[1]=f=>{o(s).sidebarOpen=!1})},{default:x(()=>[t("span",hs,[i(p,{icon:"fas fa-check-circle"})]),t("span",vs,e(n.$t("page_milestones")),1),o(O)>0?(l(),r("div",gs,[i(p,{icon:"fas fa-check-circle"})])):b("",!0)]),_:1},8,["to"])]),o(I)>0?(l(),r("div",bs,[i(k,{to:o(a)("/buildings"),class:"btn btn-primary position-relative d-flex align-items-center justify-content-center",exactActiveClass:"active",onClick:c[2]||(c[2]=f=>{o(s).sidebarOpen=!1})},{default:x(()=>[t("span",$s,[i(p,{icon:"fas fa-industry"})]),t("span",ws,e(n.$t("page_buildings")),1),o(N)>0?(l(),r("div",ys,[i(p,{icon:"fas fa-certificate"})])):b("",!0)]),_:1},8,["to"])])):b("",!0)])]),(l(!0),r(L,null,V(o(W),f=>(l(),r("div",{key:f,class:"col-12"},[i(S,{group:f},null,8,["group"])]))),128))])])],2),t("div",ks,[t("div",xs,[t("div",Cs,[t("div",Ss,[t("button",{type:"button",class:"btn btn-primary",onClick:c[3]||(c[3]=f=>{o(s).sidebarOpen=!0})},[i(p,{icon:"fas fa-bars","fixed-width":""})])]),t("div",js,[t("div",Os,[o(v)?(l(),r("div",As,[t("img",{src:o(v),width:"24",height:"24"},null,8,Ls)])):b("",!0),t("div",Ms,[t("span",Is,e(n.$t(o(w))),1)])])]),t("div",Es,[t("div",Vs,[t("button",Ts,[i(p,{icon:"fas fa-exclamation-triangle","fixed-width":""}),t("span",Bs,"v"+e(o(s).version),1)]),t("div",Ns," v"+e(o(s).version)+" - "+e(n.$t("disclaimer_text")),1)])]),t("div",Ws,[i(k,{to:o(a)("/scenarios"),class:"btn btn-primary d-flex align-items-center",exactActiveClass:"active",onClick:c[4]||(c[4]=f=>{o(s).sidebarOpen=!1})},{default:x(()=>[t("span",Ps,[i(p,{icon:"fas fa-list"})]),t("span",Ds,e(n.$t("page_scenarios")),1)]),_:1},8,["to"])]),t("div",Gs,[i(k,{to:o(a)("/options"),class:"btn btn-primary d-flex align-items-center",exactActiveClass:"active",onClick:c[5]||(c[5]=f=>{o(s).sidebarOpen=!1})},{default:x(()=>[t("span",Us,[i(p,{icon:"fas fa-cog"})]),t("span",zs,e(n.$t("page_options")),1)]),_:1},8,["to"])])])])]),t("div",Fs,[Z(n.$slots,"default")]),i(P)])):o(s).corrupted?(l(),r("div",Rs,[t("div",qs,[t("div",Hs,[t("div",Xs,[t("div",Zs,[Js,t("div",Ks,[t("span",Qs,e(n.$t("game_title")),1)])])]),t("div",Ys,[t("div",to,[t("div",so,e(n.$t("screenCorrupted_text")),1)])]),t("div",oo,[t("div",eo,[t("div",no,[t("span",io,e(n.$t("screenCorrupted_info")),1)]),t("div",co,[t("button",{type:"button",class:"w-100 btn btn-danger",onClick:c[6]||(c[6]=f=>o(s).showModal("modalWipe"))},[i(p,{icon:"fas fa-fw fa-skull"}),t("span",ao,e(n.$t("screenCorrupted_wipeSave")),1)])])])])])]),i(E)])):o(s).error?(l(),r("div",lo,[t("div",ro,[t("div",_o,[t("div",mo,[t("div",po,[uo,t("div",fo,[t("span",ho,e(n.$t("game_title")),1)])])]),t("div",vo,[t("div",go,[t("div",bo,e(n.$t("screenError_text")),1),t("div",$o,e(n.$t("screenError_info1")),1),t("div",wo,[t("a",yo,[t("span",null,[i(p,{icon:"fa-brands fa-fw fa-discord"})]),ko])])])]),o(s).localStorageData?(l(),r("div",xo,[t("div",Co,[t("div",So,[t("textarea",jo,e(o(s).localStorageData),1)]),t("div",Oo,[t("button",{type:"button",class:"w-100 btn btn-secondary",onClick:c[7]||(c[7]=f=>o(s).exportAppState())},[i(p,{icon:"fas fa-fw fa-copy"}),t("span",Ao,e(n.$t("screenError_exportSave")),1)])]),t("div",Lo,[t("button",{type:"button",class:"w-100 btn btn btn-secondary",onClick:c[8]||(c[8]=f=>o(s).downloadAppState())},[i(p,{icon:"fas fa-fw fa-download"}),t("span",Mo,e(n.$t("screenError_downloadSave")),1)])])])])):b("",!0),t("div",Io,[t("div",Eo,[t("div",Vo,[t("span",To,e(n.$t("screenError_info2")),1)]),t("div",Bo,[t("button",{type:"button",class:"w-100 btn btn-danger",onClick:c[9]||(c[9]=f=>o(s).showModal("modalWipe"))},[i(p,{icon:"fas fa-fw fa-skull"}),t("span",No,e(n.$t("screenError_wipeSave")),1)])])])])])]),t("div",Wo,[i(D)]),i(E)])):(l(),r("div",Po,[t("div",Do,[t("div",Go,[t("div",Uo,[t("div",zo,[t("div",Fo,[Ro,t("div",qo,[t("span",Ho,e(n.$t("game_title")),1)])])]),t("div",Xo,[t("span",Zo,e(n.$t("screenLoading_text")),1)])])])])]))],64)}}};export{ee as default};
