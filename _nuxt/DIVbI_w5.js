import{a as R}from"./CYMVvgqh.js";import{a as y,u as M,s as q}from"./ByxlmWwB.js";import{r as C,o as l,c as d,a as t,t as e,h as o,b as i,d as T,j as g,f as v,g as H,w as x,F as E,i as B,q as N,y as X,m as Z,u as J,n as K,z as Q}from"./COVN_wgt.js";import{_ as W}from"./C4u_qJqk.js";import{_ as P}from"./DmZdkQ8d.js";import{a as Y,_ as tt}from"./51VLvF_W.js";import"./DlAUqK2U.js";const st={id:"modalOffline",class:"modal fade"},ot={class:"modal-dialog"},et={class:"modal-content"},nt={class:"modal-header"},it={class:"fs-6 text-white"},ct={class:"modal-body"},at={class:"row g-2"},lt={class:"col-12 text-center"},dt={class:"fs-6 text-white"},rt={class:"col-12 text-center"},_t={class:"text-normal"},mt={class:"text-white"},pt={class:"col-12 mt-3"},ut={class:"row justify-content-center"},ht={class:"col-5 col-lg-3"},ft={class:"ms-2"},vt={__name:"ModalOffline",setup(f){const a=y();return(r,s)=>{const m=C("font-awesome-icon");return l(),d("div",st,[t("div",ot,[t("div",et,[t("div",nt,[t("span",it,e(r.$t("modalOffline_title")),1),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:s[0]||(s[0]=_=>o(a).currentModalId=null)},[i(m,{icon:"fas fa-fw fa-times"})])]),t("div",ct,[t("div",at,[t("div",lt,[t("span",dt,e(r.$t("modalOffline_text")),1)]),t("div",rt,[t("span",_t,e(r.$t("modalOffline_info")),1),T(),t("span",mt,e(o(R)(o(a).offlineTime)),1)]),t("div",pt,[t("div",ut,[t("div",ht,[t("button",{type:"button",class:"w-100 btn btn-secondary","data-bs-dismiss":"modal",onClick:s[1]||(s[1]=_=>o(a).currentModalId=null)},[t("span",null,[i(m,{icon:"fas fa-fw fa-arrow-right-long"})]),t("span",ft,e(r.$t("modalOffline_close")),1)])])])])])])])])])}}},gt={id:"modalWelcome",class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false"},bt={class:"modal-dialog"},wt={class:"modal-content"},$t={class:"modal-body"},yt={class:"row g-2"},kt={key:0,class:"col-12 text-center"},xt={class:"fs-5 text-white"},Ct={class:"col-12"},St={class:"rounded p-2 text-bg-danger text-center"},jt={class:"col-12 text-center"},Ot={key:0},Lt={class:"col-12 mt-3"},At={class:"row justify-content-center"},Et={class:"col-5 col-lg-3"},Mt={class:"ms-2"},It={__name:"ModalWelcome",setup(f){const a=y(),r=function(){a.currentModalId=null,a.firstTime=!1};return(s,m)=>{const _=C("font-awesome-icon");return l(),d("div",gt,[t("div",bt,[t("div",wt,[t("div",$t,[t("div",yt,[o(a).currentScenario?(l(),d("div",kt,[t("div",xt,e(s.$t(o(a).currentScenario.title)),1),t("div",null,e(s.$t(o(a).currentScenario.subtitle)),1)])):g("",!0),t("div",Ct,[t("div",St," v"+e(o(a).version)+" - "+e(s.$t("disclaimer_text")),1)]),t("div",jt,[o(a).currentScenario?(l(),d("div",Ot,e(s.$t(o(a).currentScenario.desc)),1)):g("",!0)]),t("div",Lt,[t("div",At,[t("div",Et,[t("button",{type:"button",class:"w-100 btn btn-success","data-bs-dismiss":"modal",onClick:m[0]||(m[0]=u=>r())},[t("span",null,[i(_,{icon:"fas fa-fw fa-arrow-right-long"})]),t("span",Mt,e(s.$t("modalWelcome_close")),1)])])])])])])])])])}}},Vt=["src"],Tt={class:"position-absolute lh-1 badge bg-dark",style:{top:"-.25rem",right:"-.5rem"}},Bt={key:0,class:"position-absolute top-0 start-0 lh-1 small text-success"},Nt={key:1,class:"w-100 btn btn-secondary",disabled:""},Wt={__name:"SidebarButton",props:["id"],setup(f){const a=f,r=y(),s=M(),m=v(()=>s.elems.find(_=>_.id==a.id));return(_,u)=>{const $=P,b=C("font-awesome-icon"),O=W;return o(m).unlocked?(l(),H(O,{key:0,to:_.localePath("/item/"+f.id),class:"w-100 btn btn-primary position-relative",exactActiveClass:"active",onClick:u[0]||(u[0]=I=>{o(r).sidebarOpen=!1,o(m).notified=!1}),title:_.$t(o(m).name)},{default:x(()=>[t("img",{src:o(m).img,width:"18",height:"18"},null,8,Vt),t("div",Tt,[i($,{id:f.id},null,8,["id"])]),o(m).notified?(l(),d("div",Bt,[i(b,{icon:"fas fa-certificate"})])):g("",!0)]),_:1},8,["to","title"])):(l(),d("button",Nt,[i(b,{icon:"fas fa-lock","fixed-width":""})]))}}},Pt={class:"row g-1 justify-content-center"},Dt={class:"col-12 text-subtitle text-center"},Gt={__name:"SidebarGroup",props:["group"],setup(f){const a=f,r=y(),s=M(),m=v(()=>s.elems.filter(_=>(r.showLocked?!0:_.unlocked)&&_.type=="item"&&_.group==a.group).map(_=>_.id));return(_,u)=>{const $=Wt;return l(),d("div",Pt,[t("div",Dt,e(_.$t(f.group)),1),(l(!0),d(E,null,B(o(m),b=>(l(),d("div",{key:b,class:"col-2"},[i($,{id:b},null,8,["id"])]))),128))])}}},Ut=N("/victory.png"),zt={id:"modalVictory",class:"modal fade"},Ft={class:"modal-dialog"},Rt={class:"modal-content"},qt={class:"modal-header bg-secondary"},Ht={class:"fs-6 text-white"},Xt={class:"modal-body"},Zt={class:"row g-2"},Jt={class:"col-12 text-center"},Kt={class:"fs-5 text-white"},Qt={class:"col-12 text-center"},Yt={class:"text-normal"},ts=t("div",{class:"col-12 text-center"},[t("img",{src:Ut,width:"48",height:"48"})],-1),ss={class:"col-12 mt-3"},os={class:"row justify-content-center"},es={class:"col-5 col-lg-3"},ns={class:"ms-2"},is={__name:"ModalVictory",setup(f){const a=y();return(r,s)=>{const m=C("font-awesome-icon");return l(),d("div",zt,[t("div",Ft,[t("div",Rt,[t("div",qt,[t("span",Ht,e(r.$t("modalVictory_title")),1),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:s[0]||(s[0]=_=>o(a).currentModalId=null)},[i(m,{icon:"fas fa-fw fa-times"})])]),t("div",Xt,[t("div",Zt,[t("div",Jt,[t("span",Kt,e(r.$t("modalVictory_subTitle")),1)]),t("div",Qt,[t("span",Yt,e(r.$t("modalVictory_text")),1)]),ts,t("div",ss,[t("div",os,[t("div",es,[t("button",{type:"button",class:"w-100 btn btn-success","data-bs-dismiss":"modal",onClick:s[1]||(s[1]=_=>o(a).currentModalId=null)},[t("span",null,[i(m,{icon:"fas fa-fw fa-trophy"})]),t("span",ns,e(r.$t("modalVictory_close")),1)])])])])])])])])])}}},j=N("/favicon.png"),cs={key:0,class:"w-100 h-100 d-flex"},as={class:"h-100 px-3 py-2 scroll-content"},ls={class:"row g-3"},ds={class:"col-12"},rs={class:"row g-2 align-items-center justify-content-lg-center"},_s=t("div",{class:"col-auto"},[t("img",{src:j,width:"24",height:"24",class:"rounded"})],-1),ms={class:"col col-lg-auto"},ps={class:"fs-5 text-white"},us={class:"col-auto d-lg-none"},hs={class:"col-12"},fs={class:"row g-1 justify-content-center"},vs={class:"col-6"},gs={class:"ms-0"},bs={class:"ms-2"},ws={key:0,class:"position-absolute top-0 end-0 lh-1 small text-success"},$s={key:0,class:"col-6"},ys={class:"ms-0"},ks={class:"ms-2"},xs={key:0,class:"position-absolute top-0 start-0 lh-1 small text-success"},Cs={key:0,class:"col-12"},Ss={class:"card card-body"},js={class:"row gx-2 align-items-center"},Os={class:"col"},Ls={class:"col-auto"},As={class:"text-white"},Es=["src"],Ms={id:"topbar",class:"bg-dark border-bottom border-2 border-translucent"},Is={class:"px-3 py-2"},Vs={class:"row g-2 align-items-center flex-nowrap"},Ts={class:"col-auto d-lg-none"},Bs={class:"col text-truncate"},Ns={class:"row g-2 align-items-center flex-nowrap"},Ws={key:0,class:"col-auto"},Ps=["src"],Ds={class:"col text-truncate"},Gs={class:"fs-5 text-white"},Us={class:"col-auto"},zs={class:"dropdown"},Fs={type:"button",class:"btn btn-danger","data-bs-toggle":"dropdown","aria-expanded":"false"},Rs={class:"d-none d-lg-inline ms-1"},qs={class:"dropdown-menu dropdown-menu-end p-2 text-bg-danger text-center"},Hs={class:"col-auto"},Xs={class:"ms-0"},Zs={class:"d-none d-lg-inline ms-2"},Js={class:"col-auto"},Ks={class:"ms-0"},Qs={class:"d-none d-lg-inline ms-2"},Ys={id:"page",class:"w-100 scroll-content"},to={key:1,class:"w-100 h-100 d-flex align-items-center justify-content-center"},so={class:"container p-3",style:{"max-width":"512px"}},oo={class:"card"},eo={class:"card-header"},no={class:"row gx-2 align-items-center justify-content-center"},io=t("div",{class:"col-auto"},[t("img",{src:j,width:"24",height:"24",class:"rounded"})],-1),co={class:"col-auto"},ao={class:"fs-5 text-white"},lo={class:"card-body"},ro={class:"row g-2 justify-content-center"},_o={class:"col-12 text-danger text-center fs-6"},mo={class:"card-body"},po={class:"row g-2 justify-content-center"},uo={class:"col-12 text-center"},ho={class:"text-normal"},fo={class:"col-5 col-lg-3"},vo={class:"ms-2"},go={key:2,class:"w-100 h-100 d-flex align-items-center justify-content-center"},bo={class:"container p-3",style:{"max-width":"512px"}},wo={class:"card"},$o={class:"card-header"},yo={class:"row gx-2 align-items-center justify-content-center"},ko=t("div",{class:"col-auto"},[t("img",{src:j,width:"24",height:"24",class:"rounded"})],-1),xo={class:"col-auto"},Co={class:"fs-5 text-white"},So={class:"card-body"},jo={class:"row g-2 justify-content-center"},Oo={class:"col-12 text-danger text-center fs-6"},Lo={class:"col-12 text-center"},Ao={class:"col-5 col-lg-3"},Eo={href:"https://discord.gg/ZXrggavUpv",target:"_blank",class:"w-100 btn btn-secondary"},Mo=t("span",{class:"ms-2"},"Discord",-1),Io={key:0,class:"card-body"},Vo={class:"row g-2 justify-content-center"},To={class:"col-12"},Bo={spellcheck:"false",rows:"3",class:"form-control",disabled:"",readonly:""},No={class:"col-5 col-lg-3"},Wo={class:"ms-2"},Po={class:"col-5 col-lg-3"},Do={class:"ms-2"},Go={class:"card-body"},Uo={class:"row g-2 justify-content-center"},zo={class:"col-12 text-center"},Fo={class:"text-normal"},Ro={class:"col-5 col-lg-3"},qo={class:"ms-2"},Ho={id:"toast-container",class:"toast-container position-fixed bottom-0 end-0 p-3"},Xo={key:3,class:"w-100 h-100 d-flex align-items-center justify-content-center"},Zo={class:"container p-3",style:{"max-width":"320px"}},Jo={class:"card card-body"},Ko={class:"row g-2"},Qo={class:"col-12"},Yo={class:"row gx-2 align-items-center justify-content-center"},te=t("div",{class:"col-auto"},[t("img",{src:j,width:"24",height:"24",class:"rounded"})],-1),se={class:"col-auto"},oe={class:"fs-5 text-white"},ee={class:"col-12 text-center"},ne={class:"flicker text-primary"},me={__name:"home",setup(f){const a=X(),r=Z(),s=y();var m=null;const _=()=>{s.resetInProgress||s.saveAppState(),s.stopGameLoop(),m&&clearInterval(m),window.removeEventListener("beforeunload",_)};setTimeout(()=>{s.startApp(),s.loaded&&(s.startGameLoop(),s.firstTime&&s.showModal("modalWelcome"),m=q(()=>{s.resetInProgress||s.saveAppState()},3e4),window.addEventListener("beforeunload",_))},1e3);const u=M(),$=v(()=>r.meta.title?r.meta.title:r.params.id&&s.loaded?u.elems.find(c=>c.type=="item"&&c.id==r.params.id).name:""),b=v(()=>r.params.id&&s.loaded?u.elems.find(c=>c.type=="item"&&c.id==r.params.id).img:null);J({title:$});const O=v(()=>{let n=0;return u.elems.filter(w=>w.unlocked&&w.type=="milestone"&&w.count<1).forEach(w=>{let A=u.elems.find(S=>S.type=="manual"&&S.results[w.id]),p=u.getCosts(A);u.checkCounts(p)&&(n+=1)}),n}),I=v(()=>u.elems.filter(n=>n.unlocked&&n.type=="building").length),D=v(()=>u.elems.filter(n=>n.unlocked&&n.notified&&n.type=="building").length),L=v(()=>u.getElem("energy")),G=v(()=>[...new Set(u.elems.filter(n=>(s.showLocked?!0:n.unlocked)&&n.type=="item").map(n=>n.group))]);return(n,c)=>{const w=vt,A=It,p=C("font-awesome-icon"),k=W,S=P,U=Gt,z=is,V=Y,F=tt;return l(),d(E,null,[i(w),i(A),o(s).loaded?(l(),d("div",cs,[t("div",{id:"sidebar",class:K(["bg-dark border-end border-2 border-translucent",{open:o(s).sidebarOpen}])},[t("div",as,[t("div",ls,[t("div",ds,[t("div",rs,[_s,t("div",ms,[t("span",ps,e(n.$t("game_title")),1)]),t("div",us,[t("button",{type:"button",class:"btn btn-primary",onClick:c[0]||(c[0]=h=>{o(s).sidebarOpen=!1})},[i(p,{icon:"fas fa-times","fixed-width":""})])])])]),t("div",hs,[t("div",fs,[t("div",vs,[i(k,{to:o(a)("/milestones"),class:"btn btn-primary position-relative d-flex align-items-center justify-content-center",exactActiveClass:"active",onClick:c[1]||(c[1]=h=>{o(s).sidebarOpen=!1})},{default:x(()=>[t("span",gs,[i(p,{icon:"fas fa-check-circle"})]),t("span",bs,e(n.$t("page_milestones")),1),o(O)>0?(l(),d("div",ws,[i(p,{icon:"fas fa-check-circle"})])):g("",!0)]),_:1},8,["to"])]),o(I)>0?(l(),d("div",$s,[i(k,{to:o(a)("/buildings"),class:"btn btn-primary position-relative d-flex align-items-center justify-content-center",exactActiveClass:"active",onClick:c[2]||(c[2]=h=>{o(s).sidebarOpen=!1})},{default:x(()=>[t("span",ys,[i(p,{icon:"fas fa-industry"})]),t("span",ks,e(n.$t("page_buildings")),1),o(D)>0?(l(),d("div",xs,[i(p,{icon:"fas fa-certificate"})])):g("",!0)]),_:1},8,["to"])])):g("",!0)])]),o(s).showLocked||o(L).unlocked?(l(),d("div",Cs,[t("div",Ss,[t("div",js,[t("div",Os,[t("span",null,e(n.$t(o(L).name)),1)]),t("div",Ls,[t("span",As,[t("img",{src:o(L).img,width:"16",height:"16"},null,8,Es),T(),i(S,{id:"energy"})])])])])])):g("",!0),(l(!0),d(E,null,B(o(G),h=>(l(),d("div",{key:h,class:"col-12"},[i(U,{group:h},null,8,["group"])]))),128))])])],2),t("div",Ms,[t("div",Is,[t("div",Vs,[t("div",Ts,[t("button",{type:"button",class:"btn btn-primary",onClick:c[3]||(c[3]=h=>{o(s).sidebarOpen=!0})},[i(p,{icon:"fas fa-bars","fixed-width":""})])]),t("div",Bs,[t("div",Ns,[o(b)?(l(),d("div",Ws,[t("img",{src:o(b),width:"24",height:"24"},null,8,Ps)])):g("",!0),t("div",Ds,[t("span",Gs,e(n.$t(o($))),1)])])]),t("div",Us,[t("div",zs,[t("button",Fs,[i(p,{icon:"fas fa-exclamation-triangle","fixed-width":""}),t("span",Rs,"v"+e(o(s).version),1)]),t("div",qs," v"+e(o(s).version)+" - "+e(n.$t("disclaimer_text")),1)])]),t("div",Hs,[i(k,{to:o(a)("/scenarios"),class:"btn btn-primary d-flex align-items-center",exactActiveClass:"active",onClick:c[4]||(c[4]=h=>{o(s).sidebarOpen=!1})},{default:x(()=>[t("span",Xs,[i(p,{icon:"fas fa-list"})]),t("span",Zs,e(n.$t("page_scenarios")),1)]),_:1},8,["to"])]),t("div",Js,[i(k,{to:o(a)("/options"),class:"btn btn-primary d-flex align-items-center",exactActiveClass:"active",onClick:c[5]||(c[5]=h=>{o(s).sidebarOpen=!1})},{default:x(()=>[t("span",Ks,[i(p,{icon:"fas fa-cog"})]),t("span",Qs,e(n.$t("page_options")),1)]),_:1},8,["to"])])])])]),t("div",Ys,[Q(n.$slots,"default")]),i(z)])):o(s).corrupted?(l(),d("div",to,[t("div",so,[t("div",oo,[t("div",eo,[t("div",no,[io,t("div",co,[t("span",ao,e(n.$t("game_title")),1)])])]),t("div",lo,[t("div",ro,[t("div",_o,e(n.$t("screenCorrupted_text")),1)])]),t("div",mo,[t("div",po,[t("div",uo,[t("span",ho,e(n.$t("screenCorrupted_info")),1)]),t("div",fo,[t("button",{type:"button",class:"w-100 btn btn-danger",onClick:c[6]||(c[6]=h=>o(s).showModal("modalWipe"))},[i(p,{icon:"fas fa-fw fa-skull"}),t("span",vo,e(n.$t("screenCorrupted_wipeSave")),1)])])])])])]),i(V)])):o(s).error?(l(),d("div",go,[t("div",bo,[t("div",wo,[t("div",$o,[t("div",yo,[ko,t("div",xo,[t("span",Co,e(n.$t("game_title")),1)])])]),t("div",So,[t("div",jo,[t("div",Oo,e(n.$t("screenError_text")),1),t("div",Lo,e(n.$t("screenError_info1")),1),t("div",Ao,[t("a",Eo,[t("span",null,[i(p,{icon:"fa-brands fa-fw fa-discord"})]),Mo])])])]),o(s).localStorageData?(l(),d("div",Io,[t("div",Vo,[t("div",To,[t("textarea",Bo,e(o(s).localStorageData),1)]),t("div",No,[t("button",{type:"button",class:"w-100 btn btn-secondary",onClick:c[7]||(c[7]=h=>o(s).exportAppState())},[i(p,{icon:"fas fa-fw fa-copy"}),t("span",Wo,e(n.$t("screenError_exportSave")),1)])]),t("div",Po,[t("button",{type:"button",class:"w-100 btn btn btn-secondary",onClick:c[8]||(c[8]=h=>o(s).downloadAppState())},[i(p,{icon:"fas fa-fw fa-download"}),t("span",Do,e(n.$t("screenError_downloadSave")),1)])])])])):g("",!0),t("div",Go,[t("div",Uo,[t("div",zo,[t("span",Fo,e(n.$t("screenError_info2")),1)]),t("div",Ro,[t("button",{type:"button",class:"w-100 btn btn-danger",onClick:c[9]||(c[9]=h=>o(s).showModal("modalWipe"))},[i(p,{icon:"fas fa-fw fa-skull"}),t("span",qo,e(n.$t("screenError_wipeSave")),1)])])])])])]),t("div",Ho,[i(F)]),i(V)])):(l(),d("div",Xo,[t("div",Zo,[t("div",Jo,[t("div",Ko,[t("div",Qo,[t("div",Yo,[te,t("div",se,[t("span",oe,e(n.$t("game_title")),1)])])]),t("div",ee,[t("span",ne,e(n.$t("screenLoading_text")),1)])])])])]))],64)}}};export{me as default};
