import{a as G}from"./CYMVvgqh.js";import{u as x,s as U}from"./DQv47SJ4.js";import{r as k,o as r,c as _,a as t,t as e,h as o,b as i,d as F,j as g,f as v,g as R,w as y,F as M,i as V,q as T,v as q,m as z,u as H,n as X,x as Z}from"./D6RvJslP.js";import{_ as B}from"./KZmic_Dc.js";import{_ as J}from"./D0-jauTK.js";import{u as I}from"./C9C9swEq.js";import{a as K,_ as Q}from"./aCilVOPF.js";import"./DlAUqK2U.js";const Y={id:"modalOffline",class:"modal fade"},tt={class:"modal-dialog"},st={class:"modal-content"},ot={class:"modal-header"},et={class:"fs-6 text-white"},nt={class:"modal-body"},it={class:"row g-2"},ct={class:"col-12 text-center"},at={class:"fs-6 text-white"},lt={class:"col-12 text-center"},dt={class:"text-normal"},rt={class:"text-white"},_t={class:"col-12 mt-3"},mt={class:"row justify-content-center"},pt={class:"col-5 col-lg-3"},ut={class:"ms-2"},ft={__name:"ModalOffline",setup(h){const l=x();return(d,s)=>{const a=k("font-awesome-icon");return r(),_("div",Y,[t("div",tt,[t("div",st,[t("div",ot,[t("span",et,e(d.$t("modalOffline_title")),1),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:s[0]||(s[0]=u=>o(l).currentModalId=null)},[i(a,{icon:"fas fa-fw fa-times"})])]),t("div",nt,[t("div",it,[t("div",ct,[t("span",at,e(d.$t("modalOffline_text")),1)]),t("div",lt,[t("span",dt,e(d.$t("modalOffline_info")),1),F(),t("span",rt,e(o(G)(o(l).offlineTime)),1)]),t("div",_t,[t("div",mt,[t("div",pt,[t("button",{type:"button",class:"w-100 btn btn-secondary","data-bs-dismiss":"modal",onClick:s[1]||(s[1]=u=>o(l).currentModalId=null)},[t("span",null,[i(a,{icon:"fas fa-fw fa-arrow-right-long"})]),t("span",ut,e(d.$t("modalOffline_close")),1)])])])])])])])])])}}},ht={id:"modalWelcome",class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false"},vt={class:"modal-dialog"},gt={class:"modal-content"},bt={class:"modal-body"},$t={class:"row g-2"},wt={key:0,class:"col-12 text-center"},yt={class:"fs-5 text-white"},xt={class:"col-12"},kt={class:"rounded p-2 text-bg-danger text-center"},Ct={class:"col-12 text-center"},St={key:0},jt={class:"col-12 mt-3"},Ot={class:"row justify-content-center"},At={class:"col-5 col-lg-3"},Mt={class:"ms-2"},It={__name:"ModalWelcome",setup(h){const l=x(),d=function(){l.currentModalId=null,l.firstTime=!1};return(s,a)=>{const u=k("font-awesome-icon");return r(),_("div",ht,[t("div",vt,[t("div",gt,[t("div",bt,[t("div",$t,[o(l).currentScenario?(r(),_("div",wt,[t("div",yt,e(s.$t(o(l).currentScenario.title)),1),t("div",null,e(s.$t(o(l).currentScenario.subtitle)),1)])):g("",!0),t("div",xt,[t("div",kt," v"+e(o(l).version)+" - "+e(s.$t("disclaimer_text")),1)]),t("div",Ct,[o(l).currentScenario?(r(),_("div",St,e(s.$t(o(l).currentScenario.desc)),1)):g("",!0)]),t("div",jt,[t("div",Ot,[t("div",At,[t("button",{type:"button",class:"w-100 btn btn-success","data-bs-dismiss":"modal",onClick:a[0]||(a[0]=p=>d())},[t("span",null,[i(u,{icon:"fas fa-fw fa-arrow-right-long"})]),t("span",Mt,e(s.$t("modalWelcome_close")),1)])])])])])])])])])}}},Et=["src"],Lt={class:"position-absolute lh-1 badge bg-dark",style:{top:"-.25rem",right:"-.5rem"}},Vt={key:0,class:"position-absolute top-0 start-0 lh-1 small text-success"},Tt={__name:"SidebarButton",props:["id"],setup(h){const l=h,d=x(),s=I(),a=v(()=>s.elems.find(u=>u.id==l.id));return(u,p)=>{const b=J,C=k("font-awesome-icon"),O=B;return r(),R(O,{to:u.localePath("/item/"+h.id),class:"w-100 btn btn-primary position-relative",exactActiveClass:"active",onClick:p[0]||(p[0]=E=>{o(d).sidebarOpen=!1,o(a).notified=!1}),title:u.$t(o(a).name)},{default:y(()=>[t("img",{src:o(a).img,width:"18",height:"18"},null,8,Et),t("div",Lt,[i(b,{id:h.id},null,8,["id"])]),o(a).notified?(r(),_("div",Vt,[i(C,{icon:"fas fa-certificate"})])):g("",!0)]),_:1},8,["to","title"])}}},Bt={class:"row g-1 justify-content-center"},Nt={class:"col-12 text-subtitle text-center"},Wt={__name:"SidebarGroup",props:["group"],setup(h){const l=h,d=I(),s=v(()=>d.elems.filter(a=>a.unlocked&&a.type=="item"&&a.group==l.group).map(a=>a.id));return(a,u)=>{const p=Tt;return r(),_("div",Bt,[t("div",Nt,e(a.$t(h.group)),1),(r(!0),_(M,null,V(o(s),b=>(r(),_("div",{key:b,class:"col-2"},[i(p,{id:b},null,8,["id"])]))),128))])}}},Pt=T("/victory.png"),Dt={id:"modalVictory",class:"modal fade"},Gt={class:"modal-dialog"},Ut={class:"modal-content"},Ft={class:"modal-header bg-secondary"},Rt={class:"fs-6 text-white"},qt={class:"modal-body"},zt={class:"row g-2"},Ht={class:"col-12 text-center"},Xt={class:"fs-5 text-white"},Zt={class:"col-12 text-center"},Jt={class:"text-normal"},Kt=t("div",{class:"col-12 text-center"},[t("img",{src:Pt,width:"48",height:"48"})],-1),Qt={class:"col-12 mt-3"},Yt={class:"row justify-content-center"},ts={class:"col-5 col-lg-3"},ss={class:"ms-2"},os={__name:"ModalVictory",setup(h){const l=x();return(d,s)=>{const a=k("font-awesome-icon");return r(),_("div",Dt,[t("div",Gt,[t("div",Ut,[t("div",Ft,[t("span",Rt,e(d.$t("modalVictory_title")),1),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:s[0]||(s[0]=u=>o(l).currentModalId=null)},[i(a,{icon:"fas fa-fw fa-times"})])]),t("div",qt,[t("div",zt,[t("div",Ht,[t("span",Xt,e(d.$t("modalVictory_subTitle")),1)]),t("div",Zt,[t("span",Jt,e(d.$t("modalVictory_text")),1)]),Kt,t("div",Qt,[t("div",Yt,[t("div",ts,[t("button",{type:"button",class:"w-100 btn btn-success","data-bs-dismiss":"modal",onClick:s[1]||(s[1]=u=>o(l).currentModalId=null)},[t("span",null,[i(a,{icon:"fas fa-fw fa-trophy"})]),t("span",ss,e(d.$t("modalVictory_close")),1)])])])])])])])])])}}},j=T("/favicon.png"),es={key:0,class:"w-100 h-100 d-flex"},ns={class:"h-100 px-3 py-2 scroll-content"},is={class:"row g-3"},cs={class:"col-12"},as={class:"row g-2 align-items-center justify-content-lg-center"},ls=t("div",{class:"col-auto"},[t("img",{src:j,width:"24",height:"24",class:"rounded"})],-1),ds={class:"col col-lg-auto"},rs={class:"fs-5 text-white"},_s={class:"col-auto d-lg-none"},ms={class:"col-12"},ps={class:"row g-1 justify-content-center"},us={class:"col-6"},fs={class:"ms-0"},hs={class:"ms-2"},vs={key:0,class:"position-absolute top-0 end-0 lh-1 small text-success"},gs={key:0,class:"col-6"},bs={class:"ms-0"},$s={class:"ms-2"},ws={key:0,class:"position-absolute top-0 start-0 lh-1 small text-success"},ys={id:"topbar",class:"bg-dark border-bottom border-2 border-translucent"},xs={class:"px-3 py-2"},ks={class:"row g-2 align-items-center flex-nowrap"},Cs={class:"col-auto d-lg-none"},Ss={class:"col text-truncate"},js={class:"row g-2 align-items-center flex-nowrap"},Os={key:0,class:"col-auto"},As=["src"],Ms={class:"col text-truncate"},Is={class:"fs-5 text-white"},Es={class:"col-auto"},Ls={class:"dropdown"},Vs={type:"button",class:"btn btn-danger","data-bs-toggle":"dropdown","aria-expanded":"false"},Ts={class:"d-none d-lg-inline ms-1"},Bs={class:"dropdown-menu dropdown-menu-end p-2 text-bg-danger text-center"},Ns={class:"col-auto"},Ws={class:"ms-0"},Ps={class:"d-none d-lg-inline ms-2"},Ds={class:"col-auto"},Gs={class:"ms-0"},Us={class:"d-none d-lg-inline ms-2"},Fs={id:"page",class:"w-100 scroll-content"},Rs={key:1,class:"w-100 h-100 d-flex align-items-center justify-content-center"},qs={class:"container p-3",style:{"max-width":"512px"}},zs={class:"card"},Hs={class:"card-header"},Xs={class:"row gx-2 align-items-center justify-content-center"},Zs=t("div",{class:"col-auto"},[t("img",{src:j,width:"24",height:"24",class:"rounded"})],-1),Js={class:"col-auto"},Ks={class:"fs-5 text-white"},Qs={class:"card-body"},Ys={class:"row g-2 justify-content-center"},to={class:"col-12 text-danger text-center fs-6"},so={class:"card-body"},oo={class:"row g-2 justify-content-center"},eo={class:"col-12 text-center"},no={class:"text-normal"},io={class:"col-5 col-lg-3"},co={class:"ms-2"},ao={key:2,class:"w-100 h-100 d-flex align-items-center justify-content-center"},lo={class:"container p-3",style:{"max-width":"512px"}},ro={class:"card"},_o={class:"card-header"},mo={class:"row gx-2 align-items-center justify-content-center"},po=t("div",{class:"col-auto"},[t("img",{src:j,width:"24",height:"24",class:"rounded"})],-1),uo={class:"col-auto"},fo={class:"fs-5 text-white"},ho={class:"card-body"},vo={class:"row g-2 justify-content-center"},go={class:"col-12 text-danger text-center fs-6"},bo={class:"col-12 text-center"},$o={class:"col-5 col-lg-3"},wo={href:"https://discord.gg/ZXrggavUpv",target:"_blank",class:"w-100 btn btn-secondary"},yo=t("span",{class:"ms-2"},"Discord",-1),xo={key:0,class:"card-body"},ko={class:"row g-2 justify-content-center"},Co={class:"col-12"},So={spellcheck:"false",rows:"3",class:"form-control",disabled:"",readonly:""},jo={class:"col-5 col-lg-3"},Oo={class:"ms-2"},Ao={class:"col-5 col-lg-3"},Mo={class:"ms-2"},Io={class:"card-body"},Eo={class:"row g-2 justify-content-center"},Lo={class:"col-12 text-center"},Vo={class:"text-normal"},To={class:"col-5 col-lg-3"},Bo={class:"ms-2"},No={id:"toast-container",class:"toast-container position-fixed bottom-0 end-0 p-3"},Wo={key:3,class:"w-100 h-100 d-flex align-items-center justify-content-center"},Po={class:"container p-3",style:{"max-width":"320px"}},Do={class:"card card-body"},Go={class:"row g-2"},Uo={class:"col-12"},Fo={class:"row gx-2 align-items-center justify-content-center"},Ro=t("div",{class:"col-auto"},[t("img",{src:j,width:"24",height:"24",class:"rounded"})],-1),qo={class:"col-auto"},zo={class:"fs-5 text-white"},Ho={class:"col-12 text-center"},Xo={class:"flicker text-primary"},ee={__name:"home",setup(h){const l=q(),d=z(),s=x();var a=null;const u=()=>{s.resetInProgress||s.saveAppState(),s.stopGameLoop(),a&&clearInterval(a),window.removeEventListener("beforeunload",u)};setTimeout(()=>{s.startApp(),s.loaded&&(s.startGameLoop(),s.firstTime&&s.showModal("modalWelcome"),a=U(()=>{s.resetInProgress||s.saveAppState()},3e4),window.addEventListener("beforeunload",u))},1e3);const p=I(),b=v(()=>d.meta.title?d.meta.title:d.params.id&&s.loaded?p.elems.find(c=>c.type=="item"&&c.id==d.params.id).name:""),C=v(()=>d.params.id&&s.loaded?p.elems.find(c=>c.type=="item"&&c.id==d.params.id).img:null);H({title:b});const O=v(()=>{let n=0;return p.elems.filter($=>$.unlocked&&$.type=="milestone"&&$.count<1).forEach($=>{let A=p.elems.find(S=>S.type=="manual"&&S.results[$.id]),m=p.getCosts(A);p.checkCounts(m)&&(n+=1)}),n}),E=v(()=>p.elems.filter(n=>n.unlocked&&n.type=="building").length),N=v(()=>p.elems.filter(n=>n.unlocked&&n.notified&&n.type=="building").length),W=v(()=>[...new Set(p.elems.filter(n=>n.unlocked&&n.type=="item").map(n=>n.group))]);return(n,c)=>{const $=ft,A=It,m=k("font-awesome-icon"),w=B,S=Wt,P=os,L=K,D=Q;return r(),_(M,null,[i($),i(A),o(s).loaded?(r(),_("div",es,[t("div",{id:"sidebar",class:X(["bg-dark border-end border-2 border-translucent",{open:o(s).sidebarOpen}])},[t("div",ns,[t("div",is,[t("div",cs,[t("div",as,[ls,t("div",ds,[t("span",rs,e(n.$t("game_title")),1)]),t("div",_s,[t("button",{type:"button",class:"btn btn-primary",onClick:c[0]||(c[0]=f=>{o(s).sidebarOpen=!1})},[i(m,{icon:"fas fa-times","fixed-width":""})])])])]),t("div",ms,[t("div",ps,[t("div",us,[i(w,{to:o(l)("/milestones"),class:"btn btn-primary position-relative d-flex align-items-center justify-content-center",exactActiveClass:"active",onClick:c[1]||(c[1]=f=>{o(s).sidebarOpen=!1})},{default:y(()=>[t("span",fs,[i(m,{icon:"fas fa-check-circle"})]),t("span",hs,e(n.$t("page_milestones")),1),o(O)>0?(r(),_("div",vs,[i(m,{icon:"fas fa-check-circle"})])):g("",!0)]),_:1},8,["to"])]),o(E)>0?(r(),_("div",gs,[i(w,{to:o(l)("/buildings"),class:"btn btn-primary position-relative d-flex align-items-center justify-content-center",exactActiveClass:"active",onClick:c[2]||(c[2]=f=>{o(s).sidebarOpen=!1})},{default:y(()=>[t("span",bs,[i(m,{icon:"fas fa-industry"})]),t("span",$s,e(n.$t("page_buildings")),1),o(N)>0?(r(),_("div",ws,[i(m,{icon:"fas fa-certificate"})])):g("",!0)]),_:1},8,["to"])])):g("",!0)])]),(r(!0),_(M,null,V(o(W),f=>(r(),_("div",{key:f,class:"col-12"},[i(S,{group:f},null,8,["group"])]))),128))])])],2),t("div",ys,[t("div",xs,[t("div",ks,[t("div",Cs,[t("button",{type:"button",class:"btn btn-primary",onClick:c[3]||(c[3]=f=>{o(s).sidebarOpen=!0})},[i(m,{icon:"fas fa-bars","fixed-width":""})])]),t("div",Ss,[t("div",js,[o(C)?(r(),_("div",Os,[t("img",{src:o(C),width:"24",height:"24"},null,8,As)])):g("",!0),t("div",Ms,[t("span",Is,e(n.$t(o(b))),1)])])]),t("div",Es,[t("div",Ls,[t("button",Vs,[i(m,{icon:"fas fa-exclamation-triangle","fixed-width":""}),t("span",Ts,"v"+e(o(s).version),1)]),t("div",Bs," v"+e(o(s).version)+" - "+e(n.$t("disclaimer_text")),1)])]),t("div",Ns,[i(w,{to:o(l)("/scenarios"),class:"btn btn-primary d-flex align-items-center",exactActiveClass:"active",onClick:c[4]||(c[4]=f=>{o(s).sidebarOpen=!1})},{default:y(()=>[t("span",Ws,[i(m,{icon:"fas fa-list"})]),t("span",Ps,e(n.$t("page_scenarios")),1)]),_:1},8,["to"])]),t("div",Ds,[i(w,{to:o(l)("/options"),class:"btn btn-primary d-flex align-items-center",exactActiveClass:"active",onClick:c[5]||(c[5]=f=>{o(s).sidebarOpen=!1})},{default:y(()=>[t("span",Gs,[i(m,{icon:"fas fa-cog"})]),t("span",Us,e(n.$t("page_options")),1)]),_:1},8,["to"])])])])]),t("div",Fs,[Z(n.$slots,"default")]),i(P)])):o(s).corrupted?(r(),_("div",Rs,[t("div",qs,[t("div",zs,[t("div",Hs,[t("div",Xs,[Zs,t("div",Js,[t("span",Ks,e(n.$t("game_title")),1)])])]),t("div",Qs,[t("div",Ys,[t("div",to,e(n.$t("screenCorrupted_text")),1)])]),t("div",so,[t("div",oo,[t("div",eo,[t("span",no,e(n.$t("screenCorrupted_info")),1)]),t("div",io,[t("button",{type:"button",class:"w-100 btn btn-danger",onClick:c[6]||(c[6]=f=>o(s).showModal("modalWipe"))},[i(m,{icon:"fas fa-fw fa-skull"}),t("span",co,e(n.$t("screenCorrupted_wipeSave")),1)])])])])])]),i(L)])):o(s).error?(r(),_("div",ao,[t("div",lo,[t("div",ro,[t("div",_o,[t("div",mo,[po,t("div",uo,[t("span",fo,e(n.$t("game_title")),1)])])]),t("div",ho,[t("div",vo,[t("div",go,e(n.$t("screenError_text")),1),t("div",bo,e(n.$t("screenError_info1")),1),t("div",$o,[t("a",wo,[t("span",null,[i(m,{icon:"fa-brands fa-fw fa-discord"})]),yo])])])]),o(s).localStorageData?(r(),_("div",xo,[t("div",ko,[t("div",Co,[t("textarea",So,e(o(s).localStorageData),1)]),t("div",jo,[t("button",{type:"button",class:"w-100 btn btn-secondary",onClick:c[7]||(c[7]=f=>o(s).exportAppState())},[i(m,{icon:"fas fa-fw fa-copy"}),t("span",Oo,e(n.$t("screenError_exportSave")),1)])]),t("div",Ao,[t("button",{type:"button",class:"w-100 btn btn btn-secondary",onClick:c[8]||(c[8]=f=>o(s).downloadAppState())},[i(m,{icon:"fas fa-fw fa-download"}),t("span",Mo,e(n.$t("screenError_downloadSave")),1)])])])])):g("",!0),t("div",Io,[t("div",Eo,[t("div",Lo,[t("span",Vo,e(n.$t("screenError_info2")),1)]),t("div",To,[t("button",{type:"button",class:"w-100 btn btn-danger",onClick:c[9]||(c[9]=f=>o(s).showModal("modalWipe"))},[i(m,{icon:"fas fa-fw fa-skull"}),t("span",Bo,e(n.$t("screenError_wipeSave")),1)])])])])])]),t("div",No,[i(D)]),i(L)])):(r(),_("div",Wo,[t("div",Po,[t("div",Do,[t("div",Go,[t("div",Uo,[t("div",Fo,[Ro,t("div",qo,[t("span",zo,e(n.$t("game_title")),1)])])]),t("div",Ho,[t("span",Xo,e(n.$t("screenLoading_text")),1)])])])])]))],64)}}};export{ee as default};
