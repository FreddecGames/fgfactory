import{S as O,T as M,U as E}from"./CoRMEb5R.js";class B{constructor(e){Object.getOwnPropertyNames(e).forEach(t=>{Object.defineProperty(this,t,Object.getOwnPropertyDescriptor(e,t))}),this.count=this.count?this.count:0,this.max=this.max?this.max:1/0,this.notified=!1,this.unlocked=!this.reqs,this.assign&&(this.assign.count||(this.assign.count=0),this.select||(this.select={count:1,values:[1]})),this.build&&(this.build.status||(this.build.status="waiting"),this.select||(this.select={count:1,values:[1]}))}load(e){e.assignCount&&(this.assign.count=e.assignCount),e.count&&(this.count=e.count),e.notified&&(this.notified=e.notified),e.remainingSeconds&&(this.build.remainingSeconds=e.remainingSeconds),e.selectCount&&(this.select.count=e.selectCount),e.status&&(this.build.status=e.status)}getDataToSave(){let e={};return this.assign&&(e.assignCount=this.assign.count),this.build&&this.build.remainingSeconds&&(e.remainingSeconds=this.build.remainingSeconds),this.build&&this.build.status&&(e.status=this.build.status),this.count&&(e.count=this.count),this.id&&(e.id=this.id),this.notified&&(e.notified=this.notified),this.select&&(e.selectCount=this.select.count),e}}const A=O({id:"game-store",state:()=>({elems:[],victory:!1}),getters:{getElem:o=>e=>o.elems.find(r=>r.id==e),checkElemCounts:o=>e=>{let r=!0;for(let t in e)o.getElem(t).count<e[t]&&(r=!1);return r},checkElemProds:o=>e=>{let r=!0;for(let t in e)o.getElem(t).prod<e[t]&&(r=!1);return r},getAvailableCount:o=>e=>{let t=o.getElem(e).count;return o.elems.filter(y=>y.assign&&y.assign.id==e&&y.assign.count>0).forEach(y=>t-=y.assign.count),t},getBuildCosts:o=>e=>{if(e.build&&e.build.costs){let r={};for(let t in e.build.costs)r[t]=e.build.costs[t]*e.select.count;return r}return null},getBuildInputs:o=>e=>{if(e.build&&e.build.inputs){let r={};for(let t in e.build.inputs)r[t]=e.build.inputs[t]*e.select.count;return r}return null},getBuildResults:o=>e=>{if(e.build&&e.build.result){let r={};if(r[e.id]=e.build.result*e.select.count,e.build.rewards)for(let t in e.build.rewards)r[t]=e.build.rewards[t]*e.select.count;return r}return null},getAssignCosts:o=>e=>{if(e.assign&&e.assign.costs){let r={};for(let t in e.assign.costs)r[t]=e.assign.costs[t]*e.select.count;return r}return null},getAssignInputs:o=>e=>{if(e.assign&&e.assign.inputs){let r={};for(let t in e.assign.inputs)r[t]=e.assign.inputs[t]*e.select.count;return r}return null},getAssignOutputs:o=>e=>{if(e.assign&&e.assign.output){let r={};return r[e.assign.output.id]=e.assign.output.count*e.select.count,r}return null},getAssignStorages:o=>e=>{if(e.assign&&e.assign.storage){let r={};return r[e.assign.storage.id]=e.assign.storage.count*e.select.count,r}return null},isVictoryReached:o=>o.victory?!1:o.terraformationIndex>=5e12},actions:{loadScenario(o){o.elems.forEach(r=>{let t=new B(r);this.elems.push(t)})},loadGameState(o){o.elems!=null&&o.elems.forEach(t=>{let d=this.getElem(t.id);d&&d.load(t)}),this.victory=o.victory??this.victory,this.elems.filter(t=>t.reqs).forEach(t=>{t.unlocked=!0}),this.elems.filter(t=>t.assign&&t.assign.count>0||t.build&&t.build.inputs&&t.count>0).forEach(t=>{if(t.build&&t.build.inputs)for(let d in t.build.inputs){let y=this.getElem(d);y.prod-=t.build.inputs[d]*t.count}if(t.assign&&t.assign.inputs)for(let d in t.assign.inputs){let y=this.getElem(d);y.prod-=t.assign.inputs[d]*t.assign.count}if(t.assign&&t.assign.output){let d=this.getElem(t.assign.output.id);d.prod+=t.assign.output.count*t.assign.count}if(t.assign&&t.assign.storage){let d=this.getElem(t.assign.storage.id);d.max+=t.assign.storage.count*t.assign.count}})},computeOfflineProgress(o){this.doTick(o)},saveGameState(o){o.elems=[],this.elems.forEach(e=>o.elems.push(e.getDataToSave())),o.victory=this.victory},doTick(o){this.elems.filter(t=>t.build&&t.build.status==="started").forEach(t=>{t.build.remainingSeconds-=o,t.build.remainingSeconds<=0&&this.onBuild(t)}),this.elems.filter(t=>t.prod>0&&t.count<t.max).forEach(t=>{t.count+=t.prod*o,t.count>=t.max&&(t.count=t.max)})},doVictory(){this.victory=!0},onBuild(o){o.build&&(o.build.status&&(o.build.status="waiting"),o.build.remainingSeconds&&(o.build.remainingSeconds=0));let e=this.getBuildResults(o);if(e)for(let t in e){let d=this.getElem(t);if(d.count>=d.max)continue;let y=e[t];d.count+=y,d.count>=d.max&&(d.count=d.max)}this.elems.filter(t=>t.reqs&&t.unlocked==!1).forEach(t=>{t.notified=!0,t.unlocked=this.checkElemCounts(t.reqs)})}}}),j=window.setInterval;var I={exports:{}};I.exports;(function(o){var e=function(){var r=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",y={};function T(i,n){if(!y[i]){y[i]={};for(var g=0;g<i.length;g++)y[i][i.charAt(g)]=g}return y[i][n]}var x={compressToBase64:function(i){if(i==null)return"";var n=x._compress(i,6,function(g){return t.charAt(g)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(i){return i==null?"":i==""?null:x._decompress(i.length,32,function(n){return T(t,i.charAt(n))})},compressToUTF16:function(i){return i==null?"":x._compress(i,15,function(n){return r(n+32)})+" "},decompressFromUTF16:function(i){return i==null?"":i==""?null:x._decompress(i.length,16384,function(n){return i.charCodeAt(n)-32})},compressToUint8Array:function(i){for(var n=x.compress(i),g=new Uint8Array(n.length*2),a=0,u=n.length;a<u;a++){var b=n.charCodeAt(a);g[a*2]=b>>>8,g[a*2+1]=b%256}return g},decompressFromUint8Array:function(i){if(i==null)return x.decompress(i);for(var n=new Array(i.length/2),g=0,a=n.length;g<a;g++)n[g]=i[g*2]*256+i[g*2+1];var u=[];return n.forEach(function(b){u.push(r(b))}),x.decompress(u.join(""))},compressToEncodedURIComponent:function(i){return i==null?"":x._compress(i,6,function(n){return d.charAt(n)})},decompressFromEncodedURIComponent:function(i){return i==null?"":i==""?null:(i=i.replace(/ /g,"+"),x._decompress(i.length,32,function(n){return T(d,i.charAt(n))}))},compress:function(i){return x._compress(i,16,function(n){return r(n)})},_compress:function(i,n,g){if(i==null)return"";var a,u,b={},v={},w="",S="",f="",h=2,m=3,_=2,l=[],s=0,p=0,c;for(c=0;c<i.length;c+=1)if(w=i.charAt(c),Object.prototype.hasOwnProperty.call(b,w)||(b[w]=m++,v[w]=!0),S=f+w,Object.prototype.hasOwnProperty.call(b,S))f=S;else{if(Object.prototype.hasOwnProperty.call(v,f)){if(f.charCodeAt(0)<256){for(a=0;a<_;a++)s=s<<1,p==n-1?(p=0,l.push(g(s)),s=0):p++;for(u=f.charCodeAt(0),a=0;a<8;a++)s=s<<1|u&1,p==n-1?(p=0,l.push(g(s)),s=0):p++,u=u>>1}else{for(u=1,a=0;a<_;a++)s=s<<1|u,p==n-1?(p=0,l.push(g(s)),s=0):p++,u=0;for(u=f.charCodeAt(0),a=0;a<16;a++)s=s<<1|u&1,p==n-1?(p=0,l.push(g(s)),s=0):p++,u=u>>1}h--,h==0&&(h=Math.pow(2,_),_++),delete v[f]}else for(u=b[f],a=0;a<_;a++)s=s<<1|u&1,p==n-1?(p=0,l.push(g(s)),s=0):p++,u=u>>1;h--,h==0&&(h=Math.pow(2,_),_++),b[S]=m++,f=String(w)}if(f!==""){if(Object.prototype.hasOwnProperty.call(v,f)){if(f.charCodeAt(0)<256){for(a=0;a<_;a++)s=s<<1,p==n-1?(p=0,l.push(g(s)),s=0):p++;for(u=f.charCodeAt(0),a=0;a<8;a++)s=s<<1|u&1,p==n-1?(p=0,l.push(g(s)),s=0):p++,u=u>>1}else{for(u=1,a=0;a<_;a++)s=s<<1|u,p==n-1?(p=0,l.push(g(s)),s=0):p++,u=0;for(u=f.charCodeAt(0),a=0;a<16;a++)s=s<<1|u&1,p==n-1?(p=0,l.push(g(s)),s=0):p++,u=u>>1}h--,h==0&&(h=Math.pow(2,_),_++),delete v[f]}else for(u=b[f],a=0;a<_;a++)s=s<<1|u&1,p==n-1?(p=0,l.push(g(s)),s=0):p++,u=u>>1;h--,h==0&&(h=Math.pow(2,_),_++)}for(u=2,a=0;a<_;a++)s=s<<1|u&1,p==n-1?(p=0,l.push(g(s)),s=0):p++,u=u>>1;for(;;)if(s=s<<1,p==n-1){l.push(g(s));break}else p++;return l.join("")},decompress:function(i){return i==null?"":i==""?null:x._decompress(i.length,32768,function(n){return i.charCodeAt(n)})},_decompress:function(i,n,g){var a=[],u=4,b=4,v=3,w="",S=[],f,h,m,_,l,s,p,c={val:g(0),position:n,index:1};for(f=0;f<3;f+=1)a[f]=f;for(m=0,l=Math.pow(2,2),s=1;s!=l;)_=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=g(c.index++)),m|=(_>0?1:0)*s,s<<=1;switch(m){case 0:for(m=0,l=Math.pow(2,8),s=1;s!=l;)_=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=g(c.index++)),m|=(_>0?1:0)*s,s<<=1;p=r(m);break;case 1:for(m=0,l=Math.pow(2,16),s=1;s!=l;)_=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=g(c.index++)),m|=(_>0?1:0)*s,s<<=1;p=r(m);break;case 2:return""}for(a[3]=p,h=p,S.push(p);;){if(c.index>i)return"";for(m=0,l=Math.pow(2,v),s=1;s!=l;)_=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=g(c.index++)),m|=(_>0?1:0)*s,s<<=1;switch(p=m){case 0:for(m=0,l=Math.pow(2,8),s=1;s!=l;)_=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=g(c.index++)),m|=(_>0?1:0)*s,s<<=1;a[b++]=r(m),p=b-1,u--;break;case 1:for(m=0,l=Math.pow(2,16),s=1;s!=l;)_=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=g(c.index++)),m|=(_>0?1:0)*s,s<<=1;a[b++]=r(m),p=b-1,u--;break;case 2:return S.join("")}if(u==0&&(u=Math.pow(2,v),v++),a[p])w=a[p];else if(p===b)w=h+h.charAt(0);else return null;S.push(w),a[b++]=h+w.charAt(0),u--,h=w,u==0&&(u=Math.pow(2,v),v++)}}};return x}();o!=null?o.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(I);var R=I.exports;const k=M(R),q={};q.id="sfy_vanilla";q.name="sfy_vanilla";q.desc="sfy_vanilla_desc";q.elems=[{type:"cat",id:"milestones",name:"sfy_milestones",icon:"fas fa-check-circle"},{type:"cat",id:"inventory",name:"sfy_inventory",icon:"fas fa-list"},{type:"cat",id:"production",name:"sfy_production",icon:"fas fa-industry"},{type:"cat",id:"storages",name:"sfy_storages",icon:"fas fa-warehouse"},{cat:"milestones",group:"sfy_project",type:"milestone",id:"space_elevator",name:"sfy_space_elevator",desc:"sfy_space_elevator_desc",max:1,build:{result:1,costs:{concrete:500,wire:1500,iron_plate:250,iron_rod:400}},reqs:{hub_upgrade_6:1}},{cat:"milestones",group:"sfy_tier",type:"milestone",id:"hub_upgrade_6",name:"sfy_hub_upgrade_6",desc:"sfy_hub_upgrade_6_desc",max:1,build:{result:1,costs:{concrete:50,wire:100,iron_plate:100,iron_rod:100}},reqs:{hub_upgrade_5:1}},{cat:"milestones",group:"sfy_tier",type:"milestone",id:"hub_upgrade_5",name:"sfy_hub_upgrade_5",desc:"sfy_hub_upgrade_5_desc",max:1,build:{result:1,rewards:{energy:2e7},costs:{concrete:20,cable:75,iron_rod:75}},reqs:{hub_upgrade_4:1}},{cat:"milestones",group:"sfy_tier",type:"milestone",id:"hub_upgrade_4",name:"sfy_hub_upgrade_4",desc:"sfy_hub_upgrade_4_desc",max:1,build:{result:1,costs:{concrete:10,cable:50,iron_rod:75}},reqs:{hub_upgrade_3:1}},{cat:"milestones",group:"sfy_tier",type:"milestone",id:"hub_upgrade_3",name:"sfy_hub_upgrade_3",desc:"sfy_hub_upgrade_3_desc",max:1,build:{result:1,costs:{wire:20,iron_plate:20,iron_rod:20}},reqs:{hub_upgrade_2:1}},{cat:"milestones",group:"sfy_tier",type:"milestone",id:"hub_upgrade_2",name:"sfy_hub_upgrade_2",desc:"sfy_hub_upgrade_2_desc",max:1,build:{result:1,rewards:{energy:2e7},costs:{iron_plate:10,iron_rod:20}},reqs:{hub_upgrade_1:1}},{cat:"milestones",group:"sfy_tier",type:"milestone",id:"hub_upgrade_1",name:"sfy_hub_upgrade_1",desc:"sfy_hub_upgrade_1_desc",max:1,build:{result:1,costs:{iron_rod:10}},reqs:{intro:1}},{cat:"milestones",group:"sfy_start",type:"milestone",id:"intro",name:"sfy_intro",desc:"sfy_intro_desc",max:1,build:{result:1}},{cat:"production",group:"sfy_power",type:"item",id:"energy",name:"sfy_energy",desc:"sfy_energy_desc",img:"/fgfactory/icons/energy.png",reqs:{hub_upgrade_2:1}},{cat:"inventory",group:"sfy_generators",type:"item",id:"biomass_burner",name:"sfy_biomass_burner",desc:"sfy_biomass_burner_desc",img:"/fgfactory/icons/biomass_burner.png",build:{result:1,seconds:.25,rewards:{energy:3e7},costs:{wire:25,iron_plate:15,iron_rod:15},inputs:{biomass:.1}},reqs:{hub_upgrade_6:1}},{cat:"inventory",group:"sfy_machines",type:"item",id:"constructor",name:"sfy_constructor",desc:"sfy_constructor_desc",img:"/fgfactory/icons/constructor.png",build:{result:1,seconds:.25,costs:{cable:8,iron_plate_2:2}},reqs:{hub_upgrade_3:1}},{cat:"inventory",group:"sfy_machines",type:"item",id:"smelter",name:"sfy_smelter",desc:"sfy_smelter_desc",img:"/fgfactory/icons/smelter.png",build:{result:1,seconds:.25,costs:{wire:8,iron_rod:5}},reqs:{hub_upgrade_2:1}},{cat:"inventory",group:"sfy_machines",type:"item",id:"miner_1",name:"sfy_miner_1",desc:"sfy_miner_1_desc",img:"/fgfactory/icons/miner_1.png",build:{result:1,seconds:.25,costs:{concrete:10,iron_plate:10,iron_plate:12,iron_rod:4}},reqs:{hub_upgrade_5:1}},{cat:"inventory",group:"sfy_machines",type:"item",id:"miner",name:"sfy_miner",desc:"sfy_miner_desc",max:5,img:"/fgfactory/icons/miner.png",build:{result:1,seconds:.25,costs:{iron_plate:2,iron_rod:4}},reqs:{hub_upgrade_1:1}},{cat:"inventory",group:"sfy_containers",type:"item",id:"box_1",name:"sfy_box_1",desc:"sfy_box_1_desc",img:"/fgfactory/icons/box_1.png",build:{result:1,seconds:.25,costs:{iron_plate:10,iron_rod:10}},reqs:{hub_upgrade_5:1}},{cat:"inventory",group:"sfy_containers",type:"item",id:"box",name:"sfy_box",desc:"sfy_box_desc",max:1,img:"/fgfactory/icons/box.png",build:{result:1,seconds:.25,costs:{iron_plate:6,iron_rod:6}},reqs:{hub_upgrade_1:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"concrete",name:"sfy_concrete",desc:"sfy_concrete_desc",max:500,img:"/fgfactory/icons/concrete.png",prod:0,build:{result:1,seconds:.5,costs:{stone:3}},reqs:{hub_upgrade_3:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"cable",name:"sfy_cable",desc:"sfy_cable_desc",max:200,img:"/fgfactory/icons/cable.png",prod:0,build:{result:1,seconds:.25,costs:{wire:2}},reqs:{hub_upgrade_3:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"wire",name:"sfy_wire",desc:"sfy_wire_desc",max:500,img:"/fgfactory/icons/wire.png",prod:0,build:{result:2,seconds:.5,costs:{copper_ingot:1}},reqs:{hub_upgrade_2:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"copper_ingot",name:"sfy_copper_ingot",desc:"sfy_copper_ingot_desc",max:100,img:"/fgfactory/icons/copper_ingot.png",prod:0,build:{result:1,seconds:.75,costs:{copper_ore:1}},reqs:{hub_upgrade_2:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"iron_plate_2",name:"sfy_iron_plate_2",desc:"sfy_iron_plate_2_desc",max:100,img:"/fgfactory/icons/iron_plate_2.png",prod:0,build:{result:1,seconds:1.5,costs:{screw:12,iron_plate:6}},reqs:{hub_upgrade_3:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"iron_plate",name:"sfy_iron_plate",desc:"sfy_iron_plate_desc",max:200,img:"/fgfactory/icons/iron_plate.png",prod:0,build:{result:2,seconds:.75,costs:{iron_ingot:3}},reqs:{hub_upgrade_1:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"screw",name:"sfy_screw",desc:"sfy_screw_desc",max:500,img:"/fgfactory/icons/screw.png",prod:0,build:{result:4,seconds:.75,costs:{iron_rod:1}},reqs:{hub_upgrade_3:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"iron_rod",name:"sfy_iron_rod",desc:"sfy_iron_rod_desc",max:200,img:"/fgfactory/icons/iron_rod.png",prod:0,build:{result:1,seconds:.25,costs:{iron_ingot:1}},reqs:{intro:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"iron_ingot",name:"sfy_iron_ingot",desc:"sfy_iron_ingot_desc",max:100,img:"/fgfactory/icons/iron_ingot.png",prod:0,build:{result:1,seconds:.75,costs:{iron_ore:1}},reqs:{intro:1}},{cat:"inventory",group:"sfy_raw",type:"item",id:"biomass",name:"sfy_biomass",desc:"sfy_biomass_desc",max:200,img:"/fgfactory/icons/biomass.png",prod:0,build:{result:1,seconds:.25},reqs:{hub_upgrade_6:1}},{cat:"inventory",group:"sfy_raw",type:"item",id:"stone",name:"sfy_stone",desc:"sfy_stone_desc",max:100,img:"/fgfactory/icons/stone.png",prod:0,build:{result:1,seconds:.25},reqs:{hub_upgrade_3:1}},{cat:"inventory",group:"sfy_raw",type:"item",id:"copper_ore",name:"sfy_copper_ore",desc:"sfy_copper_ore_desc",max:100,img:"/fgfactory/icons/copper.png",prod:0,build:{result:1,seconds:.25},reqs:{hub_upgrade_2:1}},{cat:"inventory",group:"sfy_raw",type:"item",id:"iron_ore",name:"sfy_iron_ore",desc:"sfy_iron_ore_desc",max:100,img:"/fgfactory/icons/iron.png",prod:0,build:{result:1,seconds:.25},reqs:{intro:1}},{cat:"production",group:"constructor",type:"recipe",id:"constructor_concrete",name:"sfy_concrete",img:"/fgfactory/icons/concrete.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"concrete",count:.25},inputs:{stone:.75}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"constructor",type:"recipe",id:"constructor_cable",name:"sfy_cable",img:"/fgfactory/icons/cable.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"cable",count:.5},inputs:{wire:1}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"constructor",type:"recipe",id:"constructor_wire",name:"sfy_wire",img:"/fgfactory/icons/wire.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"wire",count:.5},inputs:{copper_ingot:.25}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"constructor",type:"recipe",id:"constructor_iron_plate",name:"sfy_iron_plate",img:"/fgfactory/icons/iron_plate.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"iron_plate",count:.25},inputs:{iron_ingot:.5}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"constructor",type:"recipe",id:"constructor_screw",name:"sfy_screw",img:"/fgfactory/icons/screw.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"screw",count:.5},inputs:{iron_rod:.1}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"constructor",type:"recipe",id:"constructor_iron_rod",name:"sfy_iron_rod",img:"/fgfactory/icons/iron_rod.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"iron_rod",count:.25},inputs:{iron_ingot:.25}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"smelter",type:"recipe",id:"smelter_copper_ingot",name:"sfy_copper_ingot",img:"/fgfactory/icons/copper_ingot.png",assign:{id:"smelter",costs:{energy:4e6},output:{id:"copper_ingot",count:.5},inputs:{copper_ore:.5}},reqs:{hub_upgrade_2:1}},{cat:"production",group:"smelter",type:"recipe",id:"smelter_iron_ingot",name:"sfy_iron_ingot",img:"/fgfactory/icons/iron_ingot.png",assign:{id:"smelter",costs:{energy:4e6},output:{id:"iron_ingot",count:.5},inputs:{iron_ore:.5}},reqs:{hub_upgrade_2:1}},{cat:"production",group:"miner_1",type:"recipe",id:"miner_1_biomass",name:"sfy_biomass",img:"/fgfactory/icons/biomass.png",assign:{id:"miner_1",costs:{energy:5e6},output:{id:"biomass",count:1}},reqs:{hub_upgrade_6:1}},{cat:"production",group:"miner_1",type:"recipe",id:"miner_1_stone",name:"sfy_stone",img:"/fgfactory/icons/stone.png",assign:{id:"miner_1",costs:{energy:5e6},output:{id:"stone",count:1}},reqs:{hub_upgrade_5:1}},{cat:"production",group:"miner_1",type:"recipe",id:"miner_1_copper_ore",name:"sfy_copper_ore",img:"/fgfactory/icons/copper.png",assign:{id:"miner_1",costs:{energy:5e6},output:{id:"copper_ore",count:1}},reqs:{hub_upgrade_5:1}},{cat:"production",group:"miner_1",type:"recipe",id:"miner_1_iron_ore",name:"sfy_iron_ore",img:"/fgfactory/icons/iron.png",assign:{id:"miner_1",costs:{energy:5e6},output:{id:"iron_ore",count:1}},reqs:{hub_upgrade_5:1}},{cat:"production",group:"miner",type:"recipe",id:"miner_biomass",name:"sfy_biomass",img:"/fgfactory/icons/biomass.png",assign:{id:"miner",output:{id:"biomass",count:.5}},reqs:{hub_upgrade_6:1}},{cat:"production",group:"miner",type:"recipe",id:"miner_stone",name:"sfy_stone",img:"/fgfactory/icons/stone.png",assign:{id:"miner",output:{id:"stone",count:.5}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"miner",type:"recipe",id:"miner_copper_ore",name:"sfy_copper_ore",img:"/fgfactory/icons/copper.png",assign:{id:"miner",output:{id:"copper_ore",count:.5}},reqs:{hub_upgrade_2:1}},{cat:"production",group:"miner",type:"recipe",id:"miner_iron_ore",name:"sfy_iron_ore",img:"/fgfactory/icons/iron.png",assign:{id:"miner",output:{id:"iron_ore",count:.5}},reqs:{hub_upgrade_1:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_concrete",name:"sfy_concrete",img:"/fgfactory/icons/concrete.png",assign:{id:"box_1",storage:{id:"concrete",count:500}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_stone",name:"sfy_stone",img:"/fgfactory/icons/stone.png",assign:{id:"box_1",storage:{id:"stone",count:100}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_cable",name:"sfy_cable",img:"/fgfactory/icons/cable.png",assign:{id:"box_1",storage:{id:"cable",count:200}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_wire",name:"sfy_wire",img:"/fgfactory/icons/wire.png",assign:{id:"box_1",storage:{id:"wire",count:500}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_copper_ingot",name:"sfy_copper_ingot",img:"/fgfactory/icons/copper_ingot.png",assign:{id:"box_1",storage:{id:"copper_ingot",count:100}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_copper_ore",name:"sfy_copper_ore",img:"/fgfactory/icons/copper.png",assign:{id:"box_1",storage:{id:"copper_ore",count:100}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_iron_plate_2",name:"sfy_iron_plate_2",img:"/fgfactory/icons/iron_plate_2.png",assign:{id:"box_1",storage:{id:"iron_plate_2",count:100}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_iron_plate",name:"sfy_iron_plate",img:"/fgfactory/icons/iron_plate.png",assign:{id:"box_1",storage:{id:"iron_plate",count:200}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_screw",name:"sfy_screw",img:"/fgfactory/icons/screw.png",assign:{id:"box_1",storage:{id:"screw",count:500}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_iron_rod",name:"sfy_iron_rod",img:"/fgfactory/icons/iron_rod.png",assign:{id:"box_1",storage:{id:"iron_rod",count:200}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_iron_ingot",name:"sfy_iron_ingot",img:"/fgfactory/icons/iron_ingot.png",assign:{id:"box_1",storage:{id:"iron_ingot",count:100}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_iron_ore",name:"sfy_iron_ore",img:"/fgfactory/icons/iron.png",assign:{id:"box_1",storage:{id:"iron_ore",count:100}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_biomass",name:"sfy_biomass",img:"/fgfactory/icons/biomass.png",assign:{id:"box_1",storage:{id:"biomass",count:200}},reqs:{hub_upgrade_6:1}},{cat:"storages",group:"box",type:"storage",id:"box_concrete",name:"sfy_concrete",img:"/fgfactory/icons/concrete.png",assign:{id:"box",storage:{id:"concrete",count:250}},reqs:{hub_upgrade_3:1}},{cat:"storages",group:"box",type:"storage",id:"box_stone",name:"sfy_stone",img:"/fgfactory/icons/stone.png",assign:{id:"box",storage:{id:"stone",count:50}},reqs:{hub_upgrade_3:1}},{cat:"storages",group:"box",type:"storage",id:"box_cable",name:"sfy_cable",img:"/fgfactory/icons/cable.png",assign:{id:"box",storage:{id:"cable",count:100}},reqs:{hub_upgrade_3:1}},{cat:"storages",group:"box",type:"storage",id:"box_wire",name:"sfy_wire",img:"/fgfactory/icons/wire.png",assign:{id:"box",storage:{id:"wire",count:250}},reqs:{hub_upgrade_2:1}},{cat:"storages",group:"box",type:"storage",id:"box_copper_ingot",name:"sfy_copper_ingot",img:"/fgfactory/icons/copper_ingot.png",assign:{id:"box",storage:{id:"copper_ingot",count:50}},reqs:{hub_upgrade_2:1}},{cat:"storages",group:"box",type:"storage",id:"box_copper_ore",name:"sfy_copper_ore",img:"/fgfactory/icons/copper.png",assign:{id:"box",storage:{id:"copper_ore",count:50}},reqs:{hub_upgrade_2:1}},{cat:"storages",group:"box",type:"storage",id:"box_iron_plate_2",name:"sfy_iron_plate_2",img:"/fgfactory/icons/iron_plate_2.png",assign:{id:"box",storage:{id:"iron_plate_2",count:50}},reqs:{hub_upgrade_3:1}},{cat:"storages",group:"box",type:"storage",id:"box_iron_plate",name:"sfy_iron_plate",img:"/fgfactory/icons/iron_plate.png",assign:{id:"box",storage:{id:"iron_plate",count:100}},reqs:{hub_upgrade_1:1}},{cat:"storages",group:"box",type:"storage",id:"box_screw",name:"sfy_screw",img:"/fgfactory/icons/screw.png",assign:{id:"box",storage:{id:"screw",count:250}},reqs:{hub_upgrade_3:1}},{cat:"storages",group:"box",type:"storage",id:"box_iron_rod",name:"sfy_iron_rod",img:"/fgfactory/icons/iron_rod.png",assign:{id:"box",storage:{id:"iron_rod",count:100}},reqs:{hub_upgrade_1:1}},{cat:"storages",group:"box",type:"storage",id:"box_iron_ingot",name:"sfy_iron_ingot",img:"/fgfactory/icons/iron_ingot.png",assign:{id:"box",storage:{id:"iron_ingot",count:50}},reqs:{hub_upgrade_1:1}},{cat:"storages",group:"box",type:"storage",id:"box_iron_ore",name:"sfy_iron_ore",img:"/fgfactory/icons/iron.png",assign:{id:"box",storage:{id:"iron_ore",count:50}},reqs:{hub_upgrade_1:1}},{cat:"storages",group:"box",type:"storage",id:"box_biomass",name:"sfy_biomass",img:"/fgfactory/icons/biomass.png",assign:{id:"box",storage:{id:"biomass",count:100}},reqs:{hub_upgrade_6:1}}];const U=O({id:"app-store",state:()=>({collapsed:[],currentModalId:null,currentScenarioId:null,error:null,firstTime:!0,gameTabId:"milestones",isAppRunning:!1,loaded:!1,lastSavedTime:Date.now(),localStorageName:"fgfactory",loopInterval:null,offlineTime:0,resetInProgress:!1,version:.02,scenarios:[q]}),getters:{localStorageData:o=>localStorage.getItem(o.localStorageName),isCollapsed:o=>e=>o.collapsed.includes(e),currentScenario:o=>o.scenarios.find(e=>e.id==o.currentScenarioId)},actions:{startApp(){if(this.loaded==!0)return;this.error=null,this.loaded=!1;let o=A();try{let e=localStorage.getItem(this.localStorageName);if(e&&e!==null&&e.length%4==0){let r=k.decompressFromBase64(e);if(!r)throw"Local data corrupted";e=JSON.parse(r),console.log(e),this.loadAppState(e);let t=this.scenarios.find(d=>d.id==this.currentScenarioId);o.loadScenario(t),o.loadGameState(e)}else{this.currentScenarioId=this.scenarios[0].id;let r=this.scenarios.find(t=>t.id==this.currentScenarioId);o.loadScenario(r)}this.computeOfflineProgress(),this.loaded=!0}catch(e){this.error=e,console.error(this.error)}},loadAppState(o){this.collapsed=o.collapsed??this.collapsed,this.currentScenarioId=o.currentScenarioId??this.currentScenarioId,this.firstTime=o.firstTime??this.firstTime,this.gameTabId=o.gameTabId??this.gameTabId,this.lastSavedTime=o.lastSavedTime??this.lastSavedTime},computeOfflineProgress(){let e=(Date.now()-this.lastSavedTime)/1e3;e>15*60&&(this.offlineTime=e,this.showModal("modalOffline")),A().computeOfflineProgress(e)},saveAppState(){this.lastSavedTime=Date.now();let o={};o.collapsed=this.collapsed,o.currentScenarioId=this.currentScenarioId,o.firstTime=this.firstTime,o.gameTabId=this.gameTabId,o.lastSavedTime=this.lastSavedTime,A().saveGameState(o),console.log(o);let r=JSON.stringify(o),t=k.compressToBase64(r);localStorage.setItem(this.localStorageName,t)},exportAppState(){navigator.clipboard.writeText(this.localStorageData),this.showToast("toastExport")},downloadAppState(){let o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(this.localStorageData)),o.setAttribute("download",this.localStorageName+"_save_"+new Date().getTime()+".txt"),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)},importAppState(){let e=document.getElementById("importData").value.trim();if(!e)return this.showToast("toastImportEmpty");if(e.length%4!==0)return this.showToast("toastImportCorrupted");this.resetInProgress=!0,localStorage.setItem(this.localStorageName,e),window.location.replace("/fgfactory/game")},wipeAppState(){this.resetInProgress=!0,localStorage.removeItem(this.localStorageName),window.location.replace("/fgfactory/game")},startGameLoop(){if(this.isAppRunning)return;this.isAppRunning=!0;let o=1/60,e=performance.now(),r=0,t=()=>{let d=A(),y=performance.now(),T=(y-e)/1e3;r+=T,r>=o&&(d.doTick(o),r-=o),e=y,d.isVictoryReached&&(d.doVictory(),this.showModal("modalVictory"))};this.loopInterval=j(()=>{t()},o*1e3)},stopGameLoop(){this.isAppRunning=!1,this.loopInterval&&clearInterval(this.loopInterval)},showToast(o){let e=document.getElementById(o);new E.Toast(e).show()},showModal(o){if(this.currentModalId==o)return;this.currentModalId=o;let e=document.getElementById(o);new E.Modal(e).show()},toggleCollapsed(o){if(this.isCollapsed(o)){let e=this.collapsed.indexOf(o);this.collapsed.splice(e,1)}else this.collapsed.push(o)}}});export{U as a,j as s,A as u};
