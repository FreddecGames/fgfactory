import{S as O,T as M,U as I}from"./BBX3Dqct.js";class B{constructor(e){Object.getOwnPropertyNames(e).forEach(o=>{Object.defineProperty(this,o,Object.getOwnPropertyDescriptor(e,o))}),this.count=this.count?this.count:0,this.max=this.max?this.max:1/0,this.notified=!1,this.unlocked=!this.reqs,this.assign&&(this.assign.count||(this.assign.count=0),this.select||(this.select={count:1,values:[1]})),this.build&&(this.build.status||(this.build.status="waiting"),this.select||(this.select={count:1,values:[1]}))}load(e){e.assignCount&&(this.assign.count=e.assignCount),e.count&&(this.count=e.count),e.notified&&(this.notified=e.notified),e.remainingSeconds&&(this.build.remainingSeconds=e.remainingSeconds),e.selectCount&&(this.select.count=e.selectCount),e.status&&(this.build.status=e.status)}getDataToSave(){let e={};return this.assign&&(e.assignCount=this.assign.count),this.build&&this.build.remainingSeconds&&(e.remainingSeconds=this.build.remainingSeconds),this.build&&this.build.status&&(e.status=this.build.status),this.count&&(e.count=this.count),this.id&&(e.id=this.id),this.notified&&(e.notified=this.notified),this.select&&(e.selectCount=this.select.count),e}}const A=O({id:"game-store",state:()=>({elems:[],victory:!1}),getters:{getElem:t=>e=>t.elems.find(s=>s.id==e),checkElemCounts:t=>e=>{let s=!0;for(let o in e)t.getElem(o).count<e[o]&&(s=!1);return s},checkElemProds:t=>e=>{let s=!0;for(let o in e)t.getElem(o).prod<e[o]&&(s=!1);return s},getAvailableCount:t=>e=>{let o=t.getElem(e).count;return t.elems.filter(y=>y.assign&&y.assign.id==e&&y.assign.count>0).forEach(y=>o-=y.assign.count),o},getBuildCosts:t=>e=>{if(e.build&&e.build.costs){let s={};for(let o in e.build.costs)s[o]=e.build.costs[o]*e.select.count;return s}return null},getBuildInputs:t=>e=>{if(e.build&&e.build.inputs){let s={};for(let o in e.build.inputs)s[o]=e.build.inputs[o]*e.select.count;return s}return null},getBuildResults:t=>e=>{if(e.build&&e.build.result){let s={};if(s[e.id]=e.build.result*e.select.count,e.build.rewards)for(let o in e.build.rewards)s[o]=e.build.rewards[o]*e.select.count;return s}return null},getAssignCosts:t=>e=>{if(e.assign&&e.assign.costs){let s={};for(let o in e.assign.costs)s[o]=e.assign.costs[o]*e.select.count;return s}return null},getAssignInputs:t=>e=>{if(e.assign&&e.assign.inputs){let s={};for(let o in e.assign.inputs)s[o]=e.assign.inputs[o]*e.select.count;return s}return null},getAssignOutputs:t=>e=>{if(e.assign&&e.assign.output){let s={};return s[e.assign.output.id]=e.assign.output.count*e.select.count,s}return null},getAssignStorages:t=>e=>{if(e.assign&&e.assign.storage){let s={};return s[e.assign.storage.id]=e.assign.storage.count*e.select.count,s}return null},isVictoryReached:t=>t.victory?!1:t.terraformationIndex>=5e12},actions:{loadScenario(t){t.elems.forEach(s=>{let o=new B(s);this.elems.push(o)})},loadGameState(t){t.elems!=null&&t.elems.forEach(o=>{let _=this.getElem(o.id);_&&_.load(o)}),this.victory=t.victory??this.victory,this.elems.filter(o=>o.reqs).forEach(o=>{o.unlocked=this.checkElemCounts(o.reqs)}),this.elems.filter(o=>o.assign&&o.assign.count>0||o.build&&o.build.inputs&&o.count>0).forEach(o=>{if(o.build&&o.build.inputs)for(let _ in o.build.inputs){let y=this.getElem(_);y.prod-=o.build.inputs[_]*o.count}if(o.assign&&o.assign.inputs)for(let _ in o.assign.inputs){let y=this.getElem(_);y.prod-=o.assign.inputs[_]*o.assign.count}if(o.assign&&o.assign.output){let _=this.getElem(o.assign.output.id);_.prod+=o.assign.output.count*o.assign.count}if(o.assign&&o.assign.storage){let _=this.getElem(o.assign.storage.id);_.max+=o.assign.storage.count*o.assign.count}})},computeOfflineProgress(t){this.doTick(t)},saveGameState(t){t.elems=[],this.elems.forEach(e=>t.elems.push(e.getDataToSave())),t.victory=this.victory},doTick(t){this.elems.filter(o=>o.build&&o.build.status==="started").forEach(o=>{o.build.remainingSeconds-=t,o.build.remainingSeconds<=0&&this.onBuild(o)}),this.elems.filter(o=>o.prod>0&&o.count<o.max).forEach(o=>{o.count+=o.prod*t,o.count>=o.max&&(o.count=o.max)})},doVictory(){this.victory=!0},onBuild(t){t.build&&(t.build.status&&(t.build.status="waiting"),t.build.remainingSeconds&&(t.build.remainingSeconds=0));let e=this.getBuildResults(t);if(e)for(let o in e){let _=this.getElem(o);if(_.count>=_.max)continue;let y=e[o];_.count+=y,_.count>=_.max&&(_.count=_.max)}this.elems.filter(o=>o.reqs&&o.unlocked==!1).forEach(o=>{o.notified=!0,o.unlocked=this.checkElemCounts(o.reqs)})}}}),j=window.setInterval;var E={exports:{}};E.exports;(function(t){var e=function(){var s=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",y={};function T(i,n){if(!y[i]){y[i]={};for(var g=0;g<i.length;g++)y[i][i.charAt(g)]=g}return y[i][n]}var x={compressToBase64:function(i){if(i==null)return"";var n=x._compress(i,6,function(g){return o.charAt(g)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(i){return i==null?"":i==""?null:x._decompress(i.length,32,function(n){return T(o,i.charAt(n))})},compressToUTF16:function(i){return i==null?"":x._compress(i,15,function(n){return s(n+32)})+" "},decompressFromUTF16:function(i){return i==null?"":i==""?null:x._decompress(i.length,16384,function(n){return i.charCodeAt(n)-32})},compressToUint8Array:function(i){for(var n=x.compress(i),g=new Uint8Array(n.length*2),a=0,u=n.length;a<u;a++){var b=n.charCodeAt(a);g[a*2]=b>>>8,g[a*2+1]=b%256}return g},decompressFromUint8Array:function(i){if(i==null)return x.decompress(i);for(var n=new Array(i.length/2),g=0,a=n.length;g<a;g++)n[g]=i[g*2]*256+i[g*2+1];var u=[];return n.forEach(function(b){u.push(s(b))}),x.decompress(u.join(""))},compressToEncodedURIComponent:function(i){return i==null?"":x._compress(i,6,function(n){return _.charAt(n)})},decompressFromEncodedURIComponent:function(i){return i==null?"":i==""?null:(i=i.replace(/ /g,"+"),x._decompress(i.length,32,function(n){return T(_,i.charAt(n))}))},compress:function(i){return x._compress(i,16,function(n){return s(n)})},_compress:function(i,n,g){if(i==null)return"";var a,u,b={},v={},w="",S="",f="",h=2,m=3,d=2,l=[],r=0,p=0,c;for(c=0;c<i.length;c+=1)if(w=i.charAt(c),Object.prototype.hasOwnProperty.call(b,w)||(b[w]=m++,v[w]=!0),S=f+w,Object.prototype.hasOwnProperty.call(b,S))f=S;else{if(Object.prototype.hasOwnProperty.call(v,f)){if(f.charCodeAt(0)<256){for(a=0;a<d;a++)r=r<<1,p==n-1?(p=0,l.push(g(r)),r=0):p++;for(u=f.charCodeAt(0),a=0;a<8;a++)r=r<<1|u&1,p==n-1?(p=0,l.push(g(r)),r=0):p++,u=u>>1}else{for(u=1,a=0;a<d;a++)r=r<<1|u,p==n-1?(p=0,l.push(g(r)),r=0):p++,u=0;for(u=f.charCodeAt(0),a=0;a<16;a++)r=r<<1|u&1,p==n-1?(p=0,l.push(g(r)),r=0):p++,u=u>>1}h--,h==0&&(h=Math.pow(2,d),d++),delete v[f]}else for(u=b[f],a=0;a<d;a++)r=r<<1|u&1,p==n-1?(p=0,l.push(g(r)),r=0):p++,u=u>>1;h--,h==0&&(h=Math.pow(2,d),d++),b[S]=m++,f=String(w)}if(f!==""){if(Object.prototype.hasOwnProperty.call(v,f)){if(f.charCodeAt(0)<256){for(a=0;a<d;a++)r=r<<1,p==n-1?(p=0,l.push(g(r)),r=0):p++;for(u=f.charCodeAt(0),a=0;a<8;a++)r=r<<1|u&1,p==n-1?(p=0,l.push(g(r)),r=0):p++,u=u>>1}else{for(u=1,a=0;a<d;a++)r=r<<1|u,p==n-1?(p=0,l.push(g(r)),r=0):p++,u=0;for(u=f.charCodeAt(0),a=0;a<16;a++)r=r<<1|u&1,p==n-1?(p=0,l.push(g(r)),r=0):p++,u=u>>1}h--,h==0&&(h=Math.pow(2,d),d++),delete v[f]}else for(u=b[f],a=0;a<d;a++)r=r<<1|u&1,p==n-1?(p=0,l.push(g(r)),r=0):p++,u=u>>1;h--,h==0&&(h=Math.pow(2,d),d++)}for(u=2,a=0;a<d;a++)r=r<<1|u&1,p==n-1?(p=0,l.push(g(r)),r=0):p++,u=u>>1;for(;;)if(r=r<<1,p==n-1){l.push(g(r));break}else p++;return l.join("")},decompress:function(i){return i==null?"":i==""?null:x._decompress(i.length,32768,function(n){return i.charCodeAt(n)})},_decompress:function(i,n,g){var a=[],u=4,b=4,v=3,w="",S=[],f,h,m,d,l,r,p,c={val:g(0),position:n,index:1};for(f=0;f<3;f+=1)a[f]=f;for(m=0,l=Math.pow(2,2),r=1;r!=l;)d=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=g(c.index++)),m|=(d>0?1:0)*r,r<<=1;switch(m){case 0:for(m=0,l=Math.pow(2,8),r=1;r!=l;)d=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=g(c.index++)),m|=(d>0?1:0)*r,r<<=1;p=s(m);break;case 1:for(m=0,l=Math.pow(2,16),r=1;r!=l;)d=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=g(c.index++)),m|=(d>0?1:0)*r,r<<=1;p=s(m);break;case 2:return""}for(a[3]=p,h=p,S.push(p);;){if(c.index>i)return"";for(m=0,l=Math.pow(2,v),r=1;r!=l;)d=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=g(c.index++)),m|=(d>0?1:0)*r,r<<=1;switch(p=m){case 0:for(m=0,l=Math.pow(2,8),r=1;r!=l;)d=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=g(c.index++)),m|=(d>0?1:0)*r,r<<=1;a[b++]=s(m),p=b-1,u--;break;case 1:for(m=0,l=Math.pow(2,16),r=1;r!=l;)d=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=g(c.index++)),m|=(d>0?1:0)*r,r<<=1;a[b++]=s(m),p=b-1,u--;break;case 2:return S.join("")}if(u==0&&(u=Math.pow(2,v),v++),a[p])w=a[p];else if(p===b)w=h+h.charAt(0);else return null;S.push(w),a[b++]=h+w.charAt(0),u--,h=w,u==0&&(u=Math.pow(2,v),v++)}}};return x}();t!=null?t.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(E);var C=E.exports;const k=M(C),q={};q.id="sfy_vanilla";q.name="sfy_vanilla";q.desc="sfy_vanilla_desc";q.elems=[{type:"cat",id:"milestones",name:"sfy_milestones",icon:"fas fa-check-circle"},{type:"cat",id:"inventory",name:"sfy_inventory",icon:"fas fa-list"},{type:"cat",id:"production",name:"sfy_production",icon:"fas fa-industry"},{type:"cat",id:"storages",name:"sfy_storages",icon:"fas fa-warehouse"},{cat:"milestones",group:"sfy_project",type:"milestone",id:"phase_1",name:"sfy_phase_1",max:1,build:{result:1,costs:{iron_plate_3:50}},reqs:{order_1:1}},{cat:"milestones",group:"sfy_project",type:"milestone",id:"space_elevator",name:"sfy_space_elevator",desc:"sfy_space_elevator_desc",max:1,build:{result:1,costs:{concrete:500,wire:1500,iron_plate:250,iron_rod:400}},reqs:{hub_upgrade_6:1}},{cat:"milestones",group:"sfy_orders",type:"milestone",id:"order_1",name:"sfy_order_1",desc:"sfy_order_1_desc",max:1,build:{result:1,seconds:360,costs:{cable:200,iron_plate:300,screw:500,iron_rod:200}},reqs:{hub_upgrade_6:1}},{cat:"milestones",group:"sfy_tier",type:"milestone",id:"hub_upgrade_6",name:"sfy_hub_upgrade_6",desc:"sfy_hub_upgrade_6_desc",max:1,build:{result:1,costs:{concrete:50,wire:100,iron_plate:100,iron_rod:100}},reqs:{hub_upgrade_5:1}},{cat:"milestones",group:"sfy_tier",type:"milestone",id:"hub_upgrade_5",name:"sfy_hub_upgrade_5",desc:"sfy_hub_upgrade_5_desc",max:1,build:{result:1,rewards:{energy:2e7},costs:{concrete:20,cable:75,iron_rod:75}},reqs:{hub_upgrade_4:1}},{cat:"milestones",group:"sfy_tier",type:"milestone",id:"hub_upgrade_4",name:"sfy_hub_upgrade_4",desc:"sfy_hub_upgrade_4_desc",max:1,build:{result:1,costs:{concrete:10,cable:50,iron_rod:75}},reqs:{hub_upgrade_3:1}},{cat:"milestones",group:"sfy_tier",type:"milestone",id:"hub_upgrade_3",name:"sfy_hub_upgrade_3",desc:"sfy_hub_upgrade_3_desc",max:1,build:{result:1,costs:{wire:20,iron_plate:20,iron_rod:20}},reqs:{hub_upgrade_2:1}},{cat:"milestones",group:"sfy_tier",type:"milestone",id:"hub_upgrade_2",name:"sfy_hub_upgrade_2",desc:"sfy_hub_upgrade_2_desc",max:1,build:{result:1,rewards:{energy:2e7},costs:{iron_plate:10,iron_rod:20}},reqs:{hub_upgrade_1:1}},{cat:"milestones",group:"sfy_tier",type:"milestone",id:"hub_upgrade_1",name:"sfy_hub_upgrade_1",desc:"sfy_hub_upgrade_1_desc",max:1,build:{result:1,costs:{iron_rod:10}},reqs:{intro:1}},{cat:"milestones",group:"sfy_start",type:"milestone",id:"intro",name:"sfy_intro",desc:"sfy_intro_desc",max:1,build:{result:1}},{cat:"production",group:"sfy_power",type:"item",id:"energy",name:"sfy_energy",desc:"sfy_energy_desc",img:"/fgfactory/icons/energy.png",reqs:{hub_upgrade_2:1}},{cat:"inventory",group:"sfy_generators",type:"item",id:"biomass_burner",name:"sfy_biomass_burner",desc:"sfy_biomass_burner_desc",img:"/fgfactory/icons/biomass_burner.png",build:{result:1,seconds:.25,rewards:{energy:3e7},costs:{wire:25,iron_plate:15,iron_rod:15},inputs:{biomass:.1}},reqs:{hub_upgrade_6:1}},{cat:"inventory",group:"sfy_machines",type:"item",id:"assembler",name:"sfy_assembler",desc:"sfy_assembler_desc",img:"/fgfactory/icons/assembler.png",build:{result:1,seconds:.25,costs:{rotor:4,cable:10,iron_plate_2:8}},reqs:{order_1:1}},{cat:"inventory",group:"sfy_machines",type:"item",id:"constructor",name:"sfy_constructor",desc:"sfy_constructor_desc",img:"/fgfactory/icons/constructor.png",build:{result:1,seconds:.25,costs:{cable:8,iron_plate_2:2}},reqs:{hub_upgrade_3:1}},{cat:"inventory",group:"sfy_machines",type:"item",id:"smelter",name:"sfy_smelter",desc:"sfy_smelter_desc",img:"/fgfactory/icons/smelter.png",build:{result:1,seconds:.25,costs:{wire:8,iron_rod:5}},reqs:{hub_upgrade_2:1}},{cat:"inventory",group:"sfy_machines",type:"item",id:"miner_1",name:"sfy_miner_1",desc:"sfy_miner_1_desc",img:"/fgfactory/icons/miner_1.png",build:{result:1,seconds:.25,costs:{concrete:10,iron_plate:10,iron_plate:12,iron_rod:4}},reqs:{hub_upgrade_5:1}},{cat:"inventory",group:"sfy_machines",type:"item",id:"miner",name:"sfy_miner",desc:"sfy_miner_desc",max:5,img:"/fgfactory/icons/miner.png",build:{result:1,seconds:.25,costs:{iron_plate:2,iron_rod:4}},reqs:{hub_upgrade_1:1}},{cat:"inventory",group:"sfy_containers",type:"item",id:"box_1",name:"sfy_box_1",desc:"sfy_box_1_desc",img:"/fgfactory/icons/box_1.png",build:{result:1,seconds:.25,costs:{iron_plate:10,iron_rod:10}},reqs:{hub_upgrade_5:1}},{cat:"inventory",group:"sfy_containers",type:"item",id:"box",name:"sfy_box",desc:"sfy_box_desc",max:1,img:"/fgfactory/icons/box.png",build:{result:1,seconds:.25,costs:{iron_plate:6,iron_rod:6}},reqs:{hub_upgrade_1:1}},{cat:"inventory",group:"sfy_structures",type:"item",id:"iron_plate_3",name:"sfy_iron_plate_3",desc:"sfy_iron_plate_3_desc",max:50,img:"/fgfactory/icons/iron_plate_3.png",prod:0,reqs:{order_1:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"concrete",name:"sfy_concrete",desc:"sfy_concrete_desc",max:500,img:"/fgfactory/icons/concrete.png",prod:0,build:{result:1,seconds:.5,costs:{stone:3}},reqs:{hub_upgrade_3:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"cable",name:"sfy_cable",desc:"sfy_cable_desc",max:200,img:"/fgfactory/icons/cable.png",prod:0,build:{result:1,seconds:.25,costs:{wire:2}},reqs:{hub_upgrade_3:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"wire",name:"sfy_wire",desc:"sfy_wire_desc",max:500,img:"/fgfactory/icons/wire.png",prod:0,build:{result:2,seconds:.5,costs:{copper_ingot:1}},reqs:{hub_upgrade_2:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"copper_ingot",name:"sfy_copper_ingot",desc:"sfy_copper_ingot_desc",max:100,img:"/fgfactory/icons/copper_ingot.png",prod:0,build:{result:1,seconds:.75,costs:{copper_ore:1}},reqs:{hub_upgrade_2:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"iron_plate_2",name:"sfy_iron_plate_2",desc:"sfy_iron_plate_2_desc",max:100,img:"/fgfactory/icons/iron_plate_2.png",prod:0,build:{result:1,seconds:1.5,costs:{screw:12,iron_plate:6}},reqs:{hub_upgrade_3:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"iron_plate",name:"sfy_iron_plate",desc:"sfy_iron_plate_desc",max:200,img:"/fgfactory/icons/iron_plate.png",prod:0,build:{result:2,seconds:.75,costs:{iron_ingot:3}},reqs:{hub_upgrade_1:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"rotor",name:"sfy_rotor",desc:"sfy_rotor_desc",max:100,img:"/fgfactory/icons/rotor.png",prod:0,build:{result:1,seconds:1.5,costs:{screw:25,iron_rod:5}},reqs:{order_1:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"screw",name:"sfy_screw",desc:"sfy_screw_desc",max:500,img:"/fgfactory/icons/screw.png",prod:0,build:{result:4,seconds:.75,costs:{iron_rod:1}},reqs:{hub_upgrade_3:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"iron_rod",name:"sfy_iron_rod",desc:"sfy_iron_rod_desc",max:200,img:"/fgfactory/icons/iron_rod.png",prod:0,build:{result:1,seconds:.25,costs:{iron_ingot:1}},reqs:{intro:1}},{cat:"inventory",group:"sfy_materials",type:"item",id:"iron_ingot",name:"sfy_iron_ingot",desc:"sfy_iron_ingot_desc",max:100,img:"/fgfactory/icons/iron_ingot.png",prod:0,build:{result:1,seconds:.75,costs:{iron_ore:1}},reqs:{intro:1}},{cat:"inventory",group:"sfy_raw",type:"item",id:"biomass",name:"sfy_biomass",desc:"sfy_biomass_desc",max:200,img:"/fgfactory/icons/biomass.png",prod:0,build:{result:1,seconds:.25},reqs:{hub_upgrade_6:1}},{cat:"inventory",group:"sfy_raw",type:"item",id:"stone",name:"sfy_stone",desc:"sfy_stone_desc",max:100,img:"/fgfactory/icons/stone.png",prod:0,build:{result:1,seconds:.25},reqs:{hub_upgrade_3:1}},{cat:"inventory",group:"sfy_raw",type:"item",id:"copper_ore",name:"sfy_copper_ore",desc:"sfy_copper_ore_desc",max:100,img:"/fgfactory/icons/copper.png",prod:0,build:{result:1,seconds:.25},reqs:{hub_upgrade_2:1}},{cat:"inventory",group:"sfy_raw",type:"item",id:"iron_ore",name:"sfy_iron_ore",desc:"sfy_iron_ore_desc",max:100,img:"/fgfactory/icons/iron.png",prod:0,build:{result:1,seconds:.25},reqs:{intro:1}},{cat:"production",group:"assembler",type:"recipe",id:"assembler_iron_plate_3",name:"sfy_iron_plate_3",img:"/fgfactory/icons/iron_plate_3.png",assign:{id:"assembler",costs:{energy:15e6},output:{id:"iron_plate_3",count:.05},inputs:{iron_plate:.05,rotor:.05}},reqs:{order_1:1}},{cat:"production",group:"assembler",type:"recipe",id:"assembler_iron_plate_2",name:"sfy_iron_plate_2",img:"/fgfactory/icons/iron_plate_2.png",assign:{id:"assembler",costs:{energy:15e6},output:{id:"iron_plate_2",count:.1},inputs:{iron_plate:.5,screw:1}},reqs:{order_1:1}},{cat:"production",group:"assembler",type:"recipe",id:"assembler_rotor",name:"sfy_rotor",img:"/fgfactory/icons/rotor.png",assign:{id:"assembler",costs:{energy:15e6},output:{id:"rotor",count:.05},inputs:{screw:1.5,iron_rod:.25}},reqs:{order_1:1}},{cat:"production",group:"constructor",type:"recipe",id:"constructor_concrete",name:"sfy_concrete",img:"/fgfactory/icons/concrete.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"concrete",count:.25},inputs:{stone:.75}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"constructor",type:"recipe",id:"constructor_cable",name:"sfy_cable",img:"/fgfactory/icons/cable.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"cable",count:.5},inputs:{wire:1}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"constructor",type:"recipe",id:"constructor_wire",name:"sfy_wire",img:"/fgfactory/icons/wire.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"wire",count:.5},inputs:{copper_ingot:.25}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"constructor",type:"recipe",id:"constructor_iron_plate",name:"sfy_iron_plate",img:"/fgfactory/icons/iron_plate.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"iron_plate",count:.25},inputs:{iron_ingot:.5}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"constructor",type:"recipe",id:"constructor_screw",name:"sfy_screw",img:"/fgfactory/icons/screw.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"screw",count:.5},inputs:{iron_rod:.1}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"constructor",type:"recipe",id:"constructor_iron_rod",name:"sfy_iron_rod",img:"/fgfactory/icons/iron_rod.png",assign:{id:"constructor",costs:{energy:4e6},output:{id:"iron_rod",count:.25},inputs:{iron_ingot:.25}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"smelter",type:"recipe",id:"smelter_copper_ingot",name:"sfy_copper_ingot",img:"/fgfactory/icons/copper_ingot.png",assign:{id:"smelter",costs:{energy:4e6},output:{id:"copper_ingot",count:.5},inputs:{copper_ore:.5}},reqs:{hub_upgrade_2:1}},{cat:"production",group:"smelter",type:"recipe",id:"smelter_iron_ingot",name:"sfy_iron_ingot",img:"/fgfactory/icons/iron_ingot.png",assign:{id:"smelter",costs:{energy:4e6},output:{id:"iron_ingot",count:.5},inputs:{iron_ore:.5}},reqs:{hub_upgrade_2:1}},{cat:"production",group:"miner_1",type:"recipe",id:"miner_1_biomass",name:"sfy_biomass",img:"/fgfactory/icons/biomass.png",assign:{id:"miner_1",costs:{energy:5e6},output:{id:"biomass",count:1}},reqs:{hub_upgrade_6:1}},{cat:"production",group:"miner_1",type:"recipe",id:"miner_1_stone",name:"sfy_stone",img:"/fgfactory/icons/stone.png",assign:{id:"miner_1",costs:{energy:5e6},output:{id:"stone",count:1}},reqs:{hub_upgrade_5:1}},{cat:"production",group:"miner_1",type:"recipe",id:"miner_1_copper_ore",name:"sfy_copper_ore",img:"/fgfactory/icons/copper.png",assign:{id:"miner_1",costs:{energy:5e6},output:{id:"copper_ore",count:1}},reqs:{hub_upgrade_5:1}},{cat:"production",group:"miner_1",type:"recipe",id:"miner_1_iron_ore",name:"sfy_iron_ore",img:"/fgfactory/icons/iron.png",assign:{id:"miner_1",costs:{energy:5e6},output:{id:"iron_ore",count:1}},reqs:{hub_upgrade_5:1}},{cat:"production",group:"miner",type:"recipe",id:"miner_biomass",name:"sfy_biomass",img:"/fgfactory/icons/biomass.png",assign:{id:"miner",output:{id:"biomass",count:.5}},reqs:{hub_upgrade_6:1}},{cat:"production",group:"miner",type:"recipe",id:"miner_stone",name:"sfy_stone",img:"/fgfactory/icons/stone.png",assign:{id:"miner",output:{id:"stone",count:.5}},reqs:{hub_upgrade_3:1}},{cat:"production",group:"miner",type:"recipe",id:"miner_copper_ore",name:"sfy_copper_ore",img:"/fgfactory/icons/copper.png",assign:{id:"miner",output:{id:"copper_ore",count:.5}},reqs:{hub_upgrade_2:1}},{cat:"production",group:"miner",type:"recipe",id:"miner_iron_ore",name:"sfy_iron_ore",img:"/fgfactory/icons/iron.png",assign:{id:"miner",output:{id:"iron_ore",count:.5}},reqs:{hub_upgrade_1:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_iron_plate_3",name:"sfy_iron_plate_3",img:"/fgfactory/icons/iron_plate_3.png",assign:{id:"box_1",storage:{id:"iron_plate_3",count:50}},reqs:{order_1:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_concrete",name:"sfy_concrete",img:"/fgfactory/icons/concrete.png",assign:{id:"box_1",storage:{id:"concrete",count:500}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_stone",name:"sfy_stone",img:"/fgfactory/icons/stone.png",assign:{id:"box_1",storage:{id:"stone",count:100}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_cable",name:"sfy_cable",img:"/fgfactory/icons/cable.png",assign:{id:"box_1",storage:{id:"cable",count:200}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_wire",name:"sfy_wire",img:"/fgfactory/icons/wire.png",assign:{id:"box_1",storage:{id:"wire",count:500}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_copper_ingot",name:"sfy_copper_ingot",img:"/fgfactory/icons/copper_ingot.png",assign:{id:"box_1",storage:{id:"copper_ingot",count:100}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_copper_ore",name:"sfy_copper_ore",img:"/fgfactory/icons/copper.png",assign:{id:"box_1",storage:{id:"copper_ore",count:100}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_iron_plate_2",name:"sfy_iron_plate_2",img:"/fgfactory/icons/iron_plate_2.png",assign:{id:"box_1",storage:{id:"iron_plate_2",count:100}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_iron_plate",name:"sfy_iron_plate",img:"/fgfactory/icons/iron_plate.png",assign:{id:"box_1",storage:{id:"iron_plate",count:200}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_rotor",name:"sfy_rotor",img:"/fgfactory/icons/rotor.png",assign:{id:"box_1",storage:{id:"rotor",count:100}},reqs:{order_1:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_screw",name:"sfy_screw",img:"/fgfactory/icons/screw.png",assign:{id:"box_1",storage:{id:"screw",count:500}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_iron_rod",name:"sfy_iron_rod",img:"/fgfactory/icons/iron_rod.png",assign:{id:"box_1",storage:{id:"iron_rod",count:200}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_iron_ingot",name:"sfy_iron_ingot",img:"/fgfactory/icons/iron_ingot.png",assign:{id:"box_1",storage:{id:"iron_ingot",count:100}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_iron_ore",name:"sfy_iron_ore",img:"/fgfactory/icons/iron.png",assign:{id:"box_1",storage:{id:"iron_ore",count:100}},reqs:{hub_upgrade_5:1}},{cat:"storages",group:"box_1",type:"storage",id:"box_1_biomass",name:"sfy_biomass",img:"/fgfactory/icons/biomass.png",assign:{id:"box_1",storage:{id:"biomass",count:200}},reqs:{hub_upgrade_6:1}},{cat:"storages",group:"box",type:"storage",id:"box_iron_plate_3",name:"sfy_iron_plate_3",img:"/fgfactory/icons/iron_plate_3.png",assign:{id:"box",storage:{id:"iron_plate_3",count:25}},reqs:{order_1:1}},{cat:"storages",group:"box",type:"storage",id:"box_concrete",name:"sfy_concrete",img:"/fgfactory/icons/concrete.png",assign:{id:"box",storage:{id:"concrete",count:250}},reqs:{hub_upgrade_3:1}},{cat:"storages",group:"box",type:"storage",id:"box_stone",name:"sfy_stone",img:"/fgfactory/icons/stone.png",assign:{id:"box",storage:{id:"stone",count:50}},reqs:{hub_upgrade_3:1}},{cat:"storages",group:"box",type:"storage",id:"box_cable",name:"sfy_cable",img:"/fgfactory/icons/cable.png",assign:{id:"box",storage:{id:"cable",count:100}},reqs:{hub_upgrade_3:1}},{cat:"storages",group:"box",type:"storage",id:"box_wire",name:"sfy_wire",img:"/fgfactory/icons/wire.png",assign:{id:"box",storage:{id:"wire",count:250}},reqs:{hub_upgrade_2:1}},{cat:"storages",group:"box",type:"storage",id:"box_copper_ingot",name:"sfy_copper_ingot",img:"/fgfactory/icons/copper_ingot.png",assign:{id:"box",storage:{id:"copper_ingot",count:50}},reqs:{hub_upgrade_2:1}},{cat:"storages",group:"box",type:"storage",id:"box_copper_ore",name:"sfy_copper_ore",img:"/fgfactory/icons/copper.png",assign:{id:"box",storage:{id:"copper_ore",count:50}},reqs:{hub_upgrade_2:1}},{cat:"storages",group:"box",type:"storage",id:"box_iron_plate_2",name:"sfy_iron_plate_2",img:"/fgfactory/icons/iron_plate_2.png",assign:{id:"box",storage:{id:"iron_plate_2",count:50}},reqs:{hub_upgrade_3:1}},{cat:"storages",group:"box",type:"storage",id:"box_iron_plate",name:"sfy_iron_plate",img:"/fgfactory/icons/iron_plate.png",assign:{id:"box",storage:{id:"iron_plate",count:100}},reqs:{hub_upgrade_1:1}},{cat:"storages",group:"box",type:"storage",id:"box_rotor",name:"sfy_rotor",img:"/fgfactory/icons/rotor.png",assign:{id:"box",storage:{id:"rotor",count:50}},reqs:{order_1:1}},{cat:"storages",group:"box",type:"storage",id:"box_screw",name:"sfy_screw",img:"/fgfactory/icons/screw.png",assign:{id:"box",storage:{id:"screw",count:250}},reqs:{hub_upgrade_3:1}},{cat:"storages",group:"box",type:"storage",id:"box_iron_rod",name:"sfy_iron_rod",img:"/fgfactory/icons/iron_rod.png",assign:{id:"box",storage:{id:"iron_rod",count:100}},reqs:{hub_upgrade_1:1}},{cat:"storages",group:"box",type:"storage",id:"box_iron_ingot",name:"sfy_iron_ingot",img:"/fgfactory/icons/iron_ingot.png",assign:{id:"box",storage:{id:"iron_ingot",count:50}},reqs:{hub_upgrade_1:1}},{cat:"storages",group:"box",type:"storage",id:"box_iron_ore",name:"sfy_iron_ore",img:"/fgfactory/icons/iron.png",assign:{id:"box",storage:{id:"iron_ore",count:50}},reqs:{hub_upgrade_1:1}},{cat:"storages",group:"box",type:"storage",id:"box_biomass",name:"sfy_biomass",img:"/fgfactory/icons/biomass.png",assign:{id:"box",storage:{id:"biomass",count:100}},reqs:{hub_upgrade_6:1}}];const U=O({id:"app-store",state:()=>({collapsed:[],currentModalId:null,currentScenarioId:null,error:null,firstTime:!0,gameTabId:"milestones",isAppRunning:!1,loaded:!1,lastSavedTime:Date.now(),localStorageName:"fgfactory",loopInterval:null,offlineTime:0,resetInProgress:!1,version:.03,scenarios:[q]}),getters:{localStorageData:t=>localStorage.getItem(t.localStorageName),isCollapsed:t=>e=>t.collapsed.includes(e),currentScenario:t=>t.scenarios.find(e=>e.id==t.currentScenarioId)},actions:{startApp(){if(this.loaded==!0)return;this.error=null,this.loaded=!1;let t=A();try{let e=localStorage.getItem(this.localStorageName);if(e&&e!==null&&e.length%4==0){let s=k.decompressFromBase64(e);if(!s)throw"Local data corrupted";e=JSON.parse(s),console.log(e),this.loadAppState(e);let o=this.scenarios.find(_=>_.id==this.currentScenarioId);t.loadScenario(o),t.loadGameState(e)}else{this.currentScenarioId=this.scenarios[0].id;let s=this.scenarios.find(o=>o.id==this.currentScenarioId);t.loadScenario(s)}this.computeOfflineProgress(),this.loaded=!0}catch(e){this.error=e,console.error(this.error)}},loadAppState(t){this.collapsed=t.collapsed??this.collapsed,this.currentScenarioId=t.currentScenarioId??this.currentScenarioId,this.firstTime=t.firstTime??this.firstTime,this.gameTabId=t.gameTabId??this.gameTabId,this.lastSavedTime=t.lastSavedTime??this.lastSavedTime},computeOfflineProgress(){let e=(Date.now()-this.lastSavedTime)/1e3;e>15*60&&(this.offlineTime=e,this.showModal("modalOffline")),A().computeOfflineProgress(e)},saveAppState(){this.lastSavedTime=Date.now();let t={};t.collapsed=this.collapsed,t.currentScenarioId=this.currentScenarioId,t.firstTime=this.firstTime,t.gameTabId=this.gameTabId,t.lastSavedTime=this.lastSavedTime,A().saveGameState(t),console.log(t);let s=JSON.stringify(t),o=k.compressToBase64(s);localStorage.setItem(this.localStorageName,o)},exportAppState(){navigator.clipboard.writeText(this.localStorageData),this.showToast("toastExport")},downloadAppState(){let t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(this.localStorageData)),t.setAttribute("download",this.localStorageName+"_save_"+new Date().getTime()+".txt"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},importAppState(){let e=document.getElementById("importData").value.trim();if(!e)return this.showToast("toastImportEmpty");if(e.length%4!==0)return this.showToast("toastImportCorrupted");this.resetInProgress=!0,localStorage.setItem(this.localStorageName,e),window.location.replace("/fgfactory/game")},wipeAppState(){this.resetInProgress=!0,localStorage.removeItem(this.localStorageName),window.location.replace("/fgfactory/game")},startGameLoop(){if(this.isAppRunning)return;this.isAppRunning=!0;let t=1/60,e=performance.now(),s=0,o=()=>{let _=A(),y=performance.now(),T=(y-e)/1e3;s+=T,s>=t&&(_.doTick(t),s-=t),e=y,_.isVictoryReached&&(_.doVictory(),this.showModal("modalVictory"))};this.loopInterval=j(()=>{o()},t*1e3)},stopGameLoop(){this.isAppRunning=!1,this.loopInterval&&clearInterval(this.loopInterval)},showToast(t){let e=document.getElementById(t);new I.Toast(e).show()},showModal(t){if(this.currentModalId==t)return;this.currentModalId=t;let e=document.getElementById(t);new I.Modal(e).show()},toggleCollapsed(t){if(this.isCollapsed(t)){let e=this.collapsed.indexOf(t);this.collapsed.splice(e,1)}else this.collapsed.push(t)}}});export{U as a,j as s,A as u};
